<html>
<head>
<title>19 Corpus resources</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../default.css"/>
</head>
<body>
<h1>19 Corpus resources</h1>

<h2 id="1">Users</h2>

<h3 id="1.1">User object</h3>
<p>
<p>
The main representation for a user is found in the <tt>users</tt>
directory within the Corpus instance.  The <tt>users</tt> directory
is an instance of UserList, and its members are instances of User.</p>
<p>
The permissions system has its own user information, contained in the
GroupsFile object.  See <a href="toplevel.html#3">Permissions</a>.</p>
<p>
The primary constraint that is placed on user names is that they be
suitable for use as a filename component.  They must not contain slash
or dot.  There is a general expectation that they contain only ASCII
letters, digits, or underscore.  Nevertheless,
when using a user name as part of a URL, it is safest to hex-encode it.</p>
<p>
The Environment method <b>user</b> takes a username and returns
an instance of either User or UnknownUser.  Both
classes provide the following members and method:
<dl>
<dt><tt>props</tt></dt> <dd>A PropList.</dd>
<dt><tt>media</tt></dt> <dd>A PropList mapping media suffix to relpath.</dd>
<dt><tt>name()</tt></dt> <dd>A string, the user name.  (Inherited
    from File, in the case of User.)</dd>
</dl>
<p>
One can use the <tt>new_child()</tt> method of UserList to add new
Users.</p>

<h3 id="1.2">User editor</h3>


<h2>Romanizations</h2>
<p>
For general information about romanizations and registries, see
<a href="../core/romanization.html">Romanization</a>.</p>

<h3>Romanization</h3>
<p>
A Romanization is a mapping from 7-bit ASCII strings to Unicode
strings.</p>
<dl>
<dt><tt>decode(b)</tt></dt>
<dd>Returns the decoding of the byte-sequence <i>b</i>.</dd>

<dt><tt>decoder()</tt></dt>
<dd>Returns a decoder.  (The decode method creates a new one each time
  it is called.)</dd>

<dt><tt>romanization()</tt></dt>
<dd>Returns the romanization itself; the file contents.</dd>

<dt><tt>__setitem__(k,v)</tt></dt>
<dd>Modifies the mapping.</dd>

</dl>
<p>
A ReadOnlyRomanization behaves the same, except that it signals an
error if one tries to set an entry.</p>


<h3>Registry</h3>
<p>
A Registry is a specialization of Directory that contains
Romanizations.  The following methods are useful:</p>
<dl>
<dt><tt>new_child(name)</tt></dt>
<dd>Create a new Romanization.</dd>

<dt><tt>__getitem__(name)</tt></dt>
<dd>Returns an existing Romanization.  Returns a Romanization file.
  If the directory contains a file with the given name, it is
  returned, and otherwise, if there is a "standard" romanization with
  the given name, it is returned, wrapped in the ReadOnlyRomanization class.</dd>

<dt><tt>__contains__(name)</tt></dt>
<dd>True if there is a file in the directory or a standard
  romanization with the given name.</dd>

<dt><tt>__iter__()</tt></dt>
<dd>Iterates only over the files that are actually in the directory.</dd>

</dl>


<h3>Editor</h3>

</body>
</html>
