(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[19],{1490:function(n,t,e){},1523:function(n,t,e){"use strict";e.r(t);var r=e(6),i=e(0),u=e.n(i),o=e(63),a=e(243),l=e(17),c=e.n(l),s=e(258),d=e(259),f=e(11),v=e(345),b=e(5),g=e(16),p=e(68),h=e(752),m=e(14),x=e(9),j={fg:"#FFF",bg:"#000",newline:!1,colors:function(){var n={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return o.a.range(0,6).forEach((function(t){o.a.range(0,6).forEach((function(e){o.a.range(0,6).forEach((function(r){return function(n,t,e,r){var i=n>0?40*n+55:0,u=t>0?40*t+55:0,o=e>0?40*e+55:0;r[16+36*n+6*t+e]=function(n){var t,e=[],r=Object(x.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.push(L(i))}}catch(u){r.e(u)}finally{r.f()}return"#"+e.join("")}([i,u,o])}(t,e,r,n)}))}))})),o.a.range(0,24).forEach((function(t){var e=t+232,r=L(10*t+8);n[e]="#"+r+r+r})),n}()};function L(n){for(var t=n.toString(16);t.length<2;)t="0"+t;return t}function O(n,t,e,r){var i;if("text"===t)i=e;else if("display"===t)i=function(n,t,e){t=parseInt("".concat(t),10);var r={"-1":function(){return"<br/>"},0:function(){return n.length&&E(n)},1:function(){return A(n,"b")},3:function(){return A(n,"i")},4:function(){return A(n,"u")},8:function(){return y(n,"display:none")},9:function(){return A(n,"strike")},22:function(){return y(n,"font-weight:normal;text-decoration:none;font-style:normal")},23:function(){return T(n,"i")},24:function(){return T(n,"u")},39:function(){return I(n,e.fg)},49:function(){return F(n,e.bg)},53:function(){return y(n,"text-decoration:overline")}};if(r[t])return r[t]();if(4<t&&t<7)return A(n,"blink");var i,u,o,a;if(29<t&&t<38)return I(n,null===e||void 0===e||null===(i=e.colors)||void 0===i?void 0:i[t-30]);if(39<t&&t<48)return F(n,null===e||void 0===e||null===(u=e.colors)||void 0===u?void 0:u[t-40]);if(89<t&&t<98)return I(n,null===e||void 0===e||null===(o=e.colors)||void 0===o?void 0:o[t-90+8]);if(99<t&&t<108)return F(n,null===e||void 0===e||null===(a=e.colors)||void 0===a?void 0:a[t-100+8])}(n,+e,r);else if("xterm256Foreground"===t){var u;i=I(n,null===r||void 0===r||null===(u=r.colors)||void 0===u?void 0:u[+e])}else if("xterm256Background"===t){var o;i=F(n,null===r||void 0===r||null===(o=r.colors)||void 0===o?void 0:o[+e])}else"rgb"===t&&(i=function(n,t){var e=+(t=t.substring(2).slice(0,-1)).substr(0,2),r=t.substring(5).split(";").map((function(n){return("0"+Number(n).toString(16)).substring(-2)})).join("");return y(n,(38===e?"color:#":"background-color:#")+r)}(n,e));return i}function E(n){var t=n.slice(0);return n.length=0,t.reverse().map((function(n){return"</"+n+">"})).join("")}function A(n,t,e){return e||(e=""),n.push(t),"<".concat(t).concat(e?' style="'.concat(e,'"'):"",">")}function y(n,t){return A(n,"span",t)}function I(n,t){return A(n,"span","color:"+t)}function F(n,t){return A(n,"span","background-color:"+t)}function T(n,t){var e;if(n.slice(-1)[0]===t&&(e=n.pop()),e)return"</"+t+">"}var D=function(n,t){n="string"===typeof n?[n]:n;var e=Object.assign({},j,t),r=[],i=[];return function(n,t,e){var r=!1;function i(){return""}function u(n){return t.newline?e("display",-1):e("text",n),""}var o=[{pattern:/^\x08+/,sub:i},{pattern:/^\x1b\[[012]?K/,sub:i},{pattern:/^\x1b\[\(B/,sub:i},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function(n){return e("rgb",n),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function(n,t){return e("xterm256Foreground",t),""}},{pattern:/^\x1b\[48;5;(\d+)m/,sub:function(n,t){return e("xterm256Background",t),""}},{pattern:/^\n/,sub:u},{pattern:/^\r+\n/,sub:u},{pattern:/^\r/,sub:u},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function(n,t){r=!0,0===t.trim().length&&(t="0");var i,u=t.trimRight().split(";"),o=Object(x.a)(u);try{for(o.s();!(i=o.n()).done;){var a=i.value;e("display",a)}}catch(l){o.e(l)}finally{o.f()}return""}},{pattern:/^\x1b\[\d?J/,sub:i},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:i},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:i},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function(n){return e("text",n),""}}];function a(t,e){e>3&&r||(r=!1,n=n.replace(t.pattern,t.sub))}var l=[],c=n.length;n:for(;c>0;){for(var s=0,d=0,f=o.length;d<f;s=++d)if(a(o[s],s),n.length!==c){c=n.length;continue n}if(n.length===c)break;l.push(0),c=n.length}}(n.join(""),e,(function(n,t){var u=O(r,n,"".concat(t),e);u&&i.push(u)})),r.length&&i.push(E(r)),i.join("")},S=e(1);function R(n){var t,e,r=n.index,i=n.style,u=n.data;return Object(S.jsx)("div",{style:i,children:Object(S.jsx)("pre",{className:"LogRow__line",dangerouslySetInnerHTML:{__html:D(null!==(t=null===(e=u.logsList)||void 0===e?void 0:e[r-1])&&void 0!==t?t:"")}})})}R.displayName="RunLogsTab";var _,k=u.a.memo(R);!function(n){n.DEFAULT="default",n.LIVE_UPDATE="live-update",n.LOAD_MORE="load-more"}(_||(_={}));e(1490);function N(n){var t,e,i=n.isRunLogsLoading,l=n.runHash,x=n.runLogs,j=n.inProgress,L=n.updatedLogsCount,O=u.a.useRef(null),E=u.a.useRef(null),A=u.a.useRef({}),y=u.a.useRef({}),I=u.a.useRef(null),F=u.a.useState(_.DEFAULT),T=Object(r.a)(F,2),D=T[0],R=T[1],N=u.a.useState(p.a.Ok),w=Object(r.a)(N,2),U=w[0],P=w[1],H=u.a.useRef([0,0]),M=u.a.useState(null),V=Object(r.a)(M,2),B=V[0],z=V[1],C=u.a.useState(null),J=Object(r.a)(C,2),W=J[0],K=J[1],q=u.a.useState(0),G=Object(r.a)(q,2),Q=G[0],X=G[1],Y=u.a.useState(0),Z=Object(r.a)(Y,2),$=Z[0],nn=Z[1],tn=u.a.useState(null),en=Object(r.a)(tn,2),rn=en[0],un=en[1];function on(){var n,t;R(_.LIVE_UPDATE),an({runHash:l,record_range:I.current?"".concat((null===(n=H.current)||void 0===n?void 0:n[1])>5?(null===(t=H.current)||void 0===t?void 0:t[1])-5:0,":"):"",isLiveUpdate:!0})}function an(n){P(p.a.Pending),y.current=h.a.getRunLogs(n),y.current.call().then((function(){P(p.a.Ok),ln(),function(){if(j){var n=window.setTimeout(on,3e3);O.current={intervalId:n}}}()}))}function ln(){var n,t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||D===_.LIVE_UPDATE)&&(null===(t=y.current)||void 0===t||t.abort());(null===(n=O.current)||void 0===n?void 0:n.intervalId)&&clearInterval(O.current.intervalId)}return u.a.useEffect((function(){return an({runHash:l}),m.a(g.a.runDetails.tabs.logs.tabView),function(){ln(!0)}}),[]),u.a.useEffect((function(){j||ln()}),[j]),u.a.useEffect((function(){var n=o.a.sortBy(Object.values(null!==x&&void 0!==x?x:{}),"index"),t=o.a.sortBy(n.map((function(n){return+n.index}))),e=Array(3).fill("");H.current=[t[0],t[t.length-1]],un(t),I.current=n.map((function(n){return n.value})).concat(e)}),[x]),u.a.useEffect((function(){var n,t,e,r,i=null!==(n=null===(t=I.current)||void 0===t?void 0:t.length)&&void 0!==n?n:0;if(D===_.LOAD_MORE&&W)null===(e=A.current)||void 0===e||null===(r=e.scrollToItem)||void 0===r||r.call(e,W.visibleStartIndex+L,"start"),R(_.DEFAULT);else if(D===_.LIVE_UPDATE&&W&&(null===W||void 0===W?void 0:W.visibleStopIndex)+L>=i-1||D===_.DEFAULT){var u,a;if(!o.a.isEmpty(rn))null===(u=A.current)||void 0===u||null===(a=u.scrollToItem)||void 0===a||a.call(u,i,"end")}else{var l,c,s;null===(l=A.current)||void 0===l||null===(c=l.scrollToItem)||void 0===c||c.call(l,null!==(s=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==s?s:0,"start")}}),[I.current,rn]),u.a.useEffect((function(){var n,t,e;D===_.DEFAULT&&Q&&$&&(o.a.isEmpty(rn)||null===(n=A.current)||void 0===n||null===(t=n.scrollToItem)||void 0===t||t.call(n,null!==(e=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==e?e:0,"start"))}),[Q,$]),Object(s.d)((function(){E.current&&(X(E.current.offsetHeight),nn(E.current.offsetWidth))}),E),Object(S.jsx)(f.a,{children:Object(S.jsx)(d.a,{isLoading:i&&D===_.DEFAULT,className:"runDetailParamsTabLoader",height:"100%",children:o.a.isEmpty(x)||o.a.isEmpty(rn)||o.a.isNil(I.current)?Object(S.jsx)(v.a,{size:"xLarge",className:"runDetailParamsTabLoader",title:"No Logs"}):Object(S.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(S.jsx)("div",{className:"RunDetailLogsTab",children:Object(S.jsx)("div",{className:"Logs",ref:E,children:Object(S.jsxs)("div",{className:"Logs__wrapper",children:[Object(S.jsx)(a.d,{ref:A,height:Q||100,itemCount:(null===(t=I.current)||void 0===t?void 0:t.length)+1,itemSize:function(){return 15},width:"100%",overscanCount:100,initialScrollOffset:null!==B&&void 0!==B?B:15*(null===(e=I.current)||void 0===e?void 0:e.length),onItemsRendered:function(n){var t=n.visibleStartIndex,e=n.visibleStopIndex;K({visibleStartIndex:t,visibleStopIndex:e})},itemData:{logsList:I.current},onScroll:function(n){var t,e,r,i=n.scrollOffset,u=n.scrollDirection;z(i),i<=15&&rn&&0!==rn[0]&&"backward"===u&&(U===p.a.Ok||U===p.a.Pending&&D===_.LIVE_UPDATE)&&(ln(),R(_.LOAD_MORE),an({runHash:l,record_range:"".concat((null===(t=H.current)||void 0===t?void 0:t[0])>200?(null===(e=H.current)||void 0===e?void 0:e[0])-200:0,":").concat(null===(r=H.current)||void 0===r?void 0:r[0]),isLoadMore:!0}))},children:k},"".concat(Q).concat($)),Object(S.jsx)("div",{className:c()("overlay",{loading:i&&D===_.LOAD_MORE}),children:Object(S.jsx)(b.l,{size:24,thickness:4,color:"primary"})})]})})})})})})}N.displayName="RunLogsTab";var w=u.a.memo(N);t.default=w}}]);
//# sourceMappingURL=RunLogsTab.js.map?version=8a508d1f668ecf96686e