window.bubble_train=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n,o=function(){var t=document.currentScript;if(!t){for(var e=document.getElementsByTagName("script"),r=[],n=0;n<e.length;n++)r.push(e[n]);t=(r=r.filter((function(t){return!t.async&&!t.text&&!t.textContent}))).slice(-1)[0]}return t};if(Object.defineProperty(r,"p",{get:(n=o().src.split("/").slice(0,-1).join("/")+"/",function(){return n})}),"undefined"!=typeof jsonpScriptSrc){var i=jsonpScriptSrc;jsonpScriptSrc=function(t){var e=function(t){return/\/_dash-component-suites\//.test(t.src)}(o()),r=i(t);if(!e)return r;var n=r.split("/"),s=n.slice(-1)[0].split(".");return s.splice(1,0,"v0_0_32m1675317406"),n.splice(-1,1,s.join(".")),n.join("/")}}return r(r.s=8)}([function(t,e){t.exports=window.PropTypes},function(t,e){t.exports=window.React},function(t,e,r){var n=r(4);"string"==typeof n&&(n=[[t.i,n,""]]);var o={insertAt:"top",hmr:!0,transform:void 0,insertInto:void 0};r(6)(n,o);n.locals&&(t.exports=n.locals)},,function(t,e,r){(e=r(5)(!1)).push([t.i,".draggable_header {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    text-align: center;\r\n}\r\n\r\n.draggable_title {\r\n    background: transparent;\r\n    text-align: center;\r\n    width: 50%;\r\n    user-select: none;\r\n    border: 0px;\r\n    outline: none;\r\n}\r\n\r\n.draggable_topter {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    top: 0;\r\n}\r\n\r\n.draggable_footer {\r\n    background: #ccc;\r\n    width: 100%;\r\n    user-select: none;\r\n    position: absolute;\r\n    bottom: 0;\r\n}\r\n\r\n.draggable_panel {\r\n    overflow: hidden;\r\n    resize: both;\r\n    position: absolute;\r\n\r\n    box-shadow: 0px 0px 50px 1px #e8e8e8;\r\n    user-select: none;\r\n\r\n    z-index: 9;\r\n}\r\n\r\n.bubbletrain_panel {\r\n    user-select: none;\r\n    z-index: 9;\r\n}\r\n\r\n.draggable_content {\r\n    overflow: auto;\r\n    position: absolute;\r\n    background: white;\r\n    width: 100%;\r\n    height: 92%;\r\n    user-select: none;\r\n}\r\n\r\n.main_panel {\r\n}\r\n\r\n/* width */\r\n.draggable_content::-webkit-scrollbar {\r\n  width: 5px;\r\n  height: 5px;\r\n}\r\n\r\n.draggable_content:hover::-webkit-scrollbar {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n  box-shadow: inset 0 0 1px #ccc;\r\n  border-radius: 0px;\r\n}\r\n\r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n  background: #e0e0e0;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Handle on hover */\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: #b5b3b0;\r\n}\r\n",""]),t.exports=e},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[r].concat(i).concat([o]).join("\n")}var s,a,u;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),e.push(u))}},e}},function(t,e,r){var n,o,i={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=a.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,f=0,l=[],p=r(7);function h(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=i[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(b(n.parts[s],e))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(b(n.parts[s],e));i[n.id]={id:n.id,refs:1,parts:a}}}}function d(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function g(t,e){var r=u(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),l.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=u(t.insertAt.before,r);r.insertBefore(e,o)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return y(e,t.attrs),g(t,e),e}function y(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function b(t,e){var r,n,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var s=f++;r=c||(c=v(e)),n=w.bind(null,r,s,!1),o=w.bind(null,r,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),g(t,e),e}(e),n=O.bind(null,r,e),o=function(){_(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(e),n=x.bind(null,r),o=function(){_(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=d(t,e);return h(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o];(a=i[s.id]).refs--,n.push(a)}t&&h(d(t,e),e);for(o=0;o<n.length;o++){var a;if(0===(a=n[o]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete i[a.id]}}}};var m,P=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function w(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=P(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function x(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function O(t,e,r){var n=r.css,o=r.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(n=p(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),i=r(0),s=r.n(i);r(2);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===a(i)?i:String(i)),n)}var o,i}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(s,t);var e,r,n,i=f(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t)).state=t,e.setProps=e.setProps.bind(p(e)),e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"render",value:function(){var t=this.props.children,e=void 0===t?[]:t;e=Array.isArray(e)?e:[e];var r={width:this.getProps("width"),height:this.getProps("height"),overflow:this.getProps("overflow"),position:this.getProps("position")};return o.a.createElement("div",{className:"bubbletrain_panel",id:this.getProps("id"),style:r},e)}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=P(t);if(e){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e,r){return(e=x(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}function O(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;1==i&&(t.clearRect(0,0,s,a),e=u,r=c),t.beginPath(),t.strokeStyle="black",t.lineWidth=1,t.moveTo(e,r),t.lineTo(n,o),t.stroke(),t.closePath()}function k(t,e){return"x: "+String(t)+", y: "+String(e)}d.defaultProps={children:[],width:"100%",height:"100%",overflow:"auto",position:"absolute"},d.propTypes={id:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),width:s.a.string,height:s.a.string,overflow:s.a.string,position:s.a.string};var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(s,t);var e,r,n,i=y(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),w(m(e=i.call(this,t)),"hlMouseDown",(function(t){e.setProps({x:t.nativeEvent.offsetX}),e.setProps({y:t.nativeEvent.offsetY}),e.setProps({isDrawing:!0}),e.setProps({value:k(e.state.x,e.state.y),x0:t.nativeEvent.offsetX,y0:t.nativeEvent.offsetY})})),w(m(e),"hlMouseMove",(function(t){e.state.isDrawing&&(O(e.ctx,e.state.x,e.state.y,t.nativeEvent.offsetX,t.nativeEvent.offsetY,e.state.refresh,e.w,e.h,e.state.x0,e.state.y0),e.setProps({x:t.nativeEvent.offsetX}),e.setProps({y:t.nativeEvent.offsetY})),e.setProps({value:k(e.state.x,e.state.y)})})),w(m(e),"hlMouseUp",(function(t){e.state.isDrawing&&(console.log(t),console.log(e.c_ref.current),O(e.ctx,e.state.x,e.state.y,t.nativeEvent.offsetX,t.nativeEvent.offsetY,e.state.refresh,e.w,e.h,e.state.x0,e.state.y0),e.setProps({x:0}),e.setProps({y:0}),e.setProps({x0:0}),e.setProps({y0:0}),e.setProps({isDrawing:!1})),e.setProps({value:"here2"})})),w(m(e),"handleChange",(function(){e.setProps({refresh:!e.state.refresh})})),e.state={value:"",isDrawing:!1,x:0,y:0,x0:0,y0:0,refresh:t.refresh},console.log(e.state),e.setProps=e.setProps.bind(m(e)),e.c_ref=o.a.createRef(),e}return e=s,(r=[{key:"componentDidMount",value:function(){this.ctx=this.c_ref.current.getContext("2d"),this.w=this.c_ref.current.width,this.h=this.c_ref.current.height}},{key:"setProps",value:function(t){this.setState(t)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",checked:this.state.refresh,onChange:this.handleChange}),"Do Refresh?"),o.a.createElement("div",null,this.state.value),o.a.createElement("canvas",{id:"myPics",width:"500px",height:"500px",onMouseDown:this.hlMouseDown,onMouseUp:this.hlMouseUp,onMouseMove:this.hlMouseMove,ref:this.c_ref}))}}])&&_(e.prototype,r),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function R(t,e){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return M(this,r)}}function M(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===E(e)?e:String(e)}j.defaultProps={refresh:!1},j.propTypes={refresh:s.a.bool};var L={};function B(){for(var t in L)L[t]()}function z(t,e,r,n,o,i){var s=(r-1)*n/2;t.cx.baseVal.value=o-s+e*n,t.cy.baseVal.value=i}var N=9;var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(s,t);var e,r,n,i=T(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),U(C(e=i.call(this,t)),"set_dot_refresh",(function(t){e.dot_refresh.push(t)})),U(C(e),"isMouseInBound",(function(t){var r=e.ref_dh.current.getBoundingClientRect();t.clientX>=r.left&&(t.clientX,r.right)})),U(C(e),"hlDragStart",(function(t){console.log("drag started");var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=o-parseInt(r.style.left),a=i-parseInt(r.style.top);e.setProps({cx0:s}),e.setProps({cy0:a}),e.setProps({x0:t.nativeEvent.offsetX}),e.setProps({y0:t.nativeEvent.offsetY}),B()}})),U(C(e),"do_refresh",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)for(var r in e.dot_refresh)e.dot_refresh[r](null,!0);else for(var n in e.dot_refresh)e.dot_refresh[n]()})),U(C(e),"hlDrag",(function(t){var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=Math.max(0+e.getProps("edge_offset_x"),o+t.nativeEvent.offsetX-e.getProps("x0")-e.getProps("cx0")),a=Math.max(0+e.getProps("edge_offset_y"),i+t.nativeEvent.offsetY-e.getProps("y0")-e.getProps("cy0")),u="".concat(s,"px"),c="".concat(a,"px");for(var f in e.setProps({left:u,top:c}),e.in_refs)z(e.in_refs[f],f,Object.keys(e.in_refs).length,e.getProps("in_dot_distance"),s+parseInt(r.style.width)/2,a-e.getProps("in_dot_offset"));for(var l in e.out_refs)z(e.out_refs[l],l,Object.keys(e.out_refs).length,e.getProps("out_dot_distance"),s+parseInt(r.style.width)/2,a+parseInt(r.style.height)+e.getProps("out_dot_offset"));B()}})),U(C(e),"hlDragEnd",(function(t){console.log("drag ended");var r=e.ref1.current;if(r){var n=r.getBoundingClientRect(),o=n.x,i=n.y,s=Math.max(0+e.getProps("edge_offset_x"),o+t.nativeEvent.offsetX-e.getProps("x0")-e.getProps("cx0")),a=Math.max(0+e.getProps("edge_offset_y"),i+t.nativeEvent.offsetY-e.getProps("y0")-e.getProps("cy0")),u="".concat(s,"px"),c="".concat(a,"px");for(var f in e.setProps({left:u,top:c}),e.in_refs)z(e.in_refs[f],f,Object.keys(e.in_refs).length,e.getProps("in_dot_distance"),s+parseInt(r.style.width)/2,a-e.getProps("in_dot_offset"));for(var l in e.out_refs)z(e.out_refs[l],l,Object.keys(e.out_refs).length,e.getProps("out_dot_distance"),s+parseInt(r.style.width)/2,a+parseInt(r.style.height)+e.getProps("out_dot_offset"));B()}})),U(C(e),"hlMouseDown",(function(t){e.setProps({z_index:N+=1}),console.log("".concat(e.getProps("id")," my z: ").concat(e.getProps("z_index")))})),U(C(e),"hlTitleChange",(function(t){var r=t.target.value;e.setProps({title:r})})),e.state=t,e.setProps=e.setProps.bind(C(e)),e.ref1=o.a.createRef(),e.resizeObserver=null,e.ref_dh=o.a.createRef(),e.dot_refresh=[],e.in_refs={},e.out_refs={},e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"componentDidMount",value:function(){var t=this;this.resizeObserver=new ResizeObserver((function(e){var r=100*(1-(t.getProps("hdr_h")+t.getProps("ftr_h")+t.getProps("ttr_h"))/e[0].contentRect.height);for(var n in t.setProps({cnt_h:r+"%"}),t.in_refs)z(t.in_refs[n],n,Object.keys(t.in_refs).length,t.getProps("in_dot_distance"),parseInt(t.ref1.current.style.left)+parseInt(t.ref1.current.style.width)/2,parseInt(t.ref1.current.style.top)-t.getProps("in_dot_offset"));for(var o in t.out_refs)z(t.out_refs[o],o,Object.keys(t.out_refs).length,t.getProps("out_dot_distance"),parseInt(t.ref1.current.style.left)+parseInt(t.ref1.current.style.width)/2,parseInt(t.ref1.current.style.top)+parseInt(t.ref1.current.style.height)+t.getProps("out_dot_offset"));var i=t.ref1.current;i&&(t.setProps({width:i.style.width,height:i.style.height}),B())})),this.resizeObserver.observe(this.ref1.current),L[this.getProps("id")]=this.do_refresh}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),delete L[this.getProps("id")]}},{key:"componentDidUpdate",value:function(){!function(){for(var t in L)L[t](!0)}()}},{key:"get_in_set_ref_func",value:function(t){var e=this;return function(r){e.in_refs[t]=r}}},{key:"get_out_set_ref_func",value:function(t){var e=this;return function(r){e.out_refs[t]=r}}},{key:"get_output_targets_func",value:function(t){var e=this;return function(){return[e.getProps("output_target_lists")[t],e.getProps("output_target_pl_lists")[t]]}}},{key:"get_force_refresh_func",value:function(t){var e=this;return function(r,n){var o=e.getProps("output_target_lists"),i=e.getProps("output_target_pl_lists"),s=[],a=[];for(var u in o)u!=t?(s.push(o[u]),a.push(i[u])):(s.push(r),a.push(n));e.setProps({output_target_lists:s,output_target_pl_lists:a})}}},{key:"render",value:function(){var t=this,e=this.props.children,r=void 0===e?[]:e;r=Array.isArray(r)?r:[r];var n=[],i=[],s=this.getProps("ttr_count"),a=this.getProps("ftr_count");s>0&&(n=r.slice(0,s)),a>0&&(i=r.slice(-a)),r=r.slice(s,r.length-a);var u={width:this.getProps("width"),height:this.getProps("height"),left:this.getProps("left"),top:this.getProps("top"),zIndex:this.getProps("z_index")},c=this.getProps("input_ids"),f=[];for(var l in c)f.push({id:c[l],dot_ref:this.get_in_set_ref_func(l)});var p=[];for(var h in this.getProps("output_ids"))p.push({id:this.getProps("output_ids")[h],output_target_list:this.getProps("output_target_lists")[h],output_target_pl_list:this.getProps("output_target_pl_lists")[h],dot_ref:this.get_out_set_ref_func(h),output_targets_func:this.get_output_targets_func(h),force_refresh_func:this.get_force_refresh_func(h)});return o.a.createElement("div",null,f.map((function(e){return o.a.createElement(Pt,{key:e.id,id:e.id,dot_ref:e.dot_ref,set_refresh:t.set_dot_refresh,is_input:!0,stroke:t.getProps("stroke"),strokeWidth:t.getProps("strokeWidth"),color:t.getProps("color")})})),p.map((function(e){return o.a.createElement(Pt,{key:e.id,id:e.id,target_list:e.output_target_list,target_pl_list:e.output_target_pl_list,dot_ref:e.dot_ref,set_refresh:t.set_dot_refresh,is_input:!1,force_refresh:e.force_refresh_func,output_targets_func:e.output_targets_func,stroke:t.getProps("color"),strokeWidth:t.getProps("strokeWidth"),color:t.getProps("color")})})),o.a.createElement("div",{id:this.getProps("id"),className:"draggable_panel",style:u,ref:this.ref1,onMouseDown:this.hlMouseDown},o.a.createElement("div",{className:"draggable_header",title:this.getProps("tooltip"),onDrag:this.hlDrag,onDragStart:this.hlDragStart,onDragEnd:this.hlDragEnd,draggable:!0,style:{height:this.getProps("hdr_h"),background:this.getProps("color")},ref:this.ref_dh},o.a.createElement("input",{value:this.getProps("title"),onChange:this.hlTitleChange,className:"draggable_title",style:{fontSize:this.getProps("title_size"),fontFamily:this.getProps("title_font"),color:this.getProps("title_color")}})),o.a.createElement("div",{className:"draggable_topter",style:{height:this.getProps("ttr_h"),background:this.getProps("ttr_color")}},n),o.a.createElement("div",{className:"draggable_content",style:{height:this.getProps("cnt_h"),overflow:this.getProps("cnt_overflow")}},r),o.a.createElement("div",{className:"draggable_footer",style:{height:this.getProps("ftr_h"),background:this.getProps("ftr_color")}},i)))}}])&&S(e.prototype,r),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);A.defaultProps={children:[],ftr_count:0,ttr_count:0,width:"100px",height:"100px",left:"50px",top:"50px",cx0:0,cy0:0,x0:0,y0:0,cnt_h:"100%",hdr_h:20,ttr_h:0,ftr_h:0,input_ids:[],output_ids:[],output_target_lists:[],output_target_pl_lists:[],in_dot_offset:10,in_dot_distance:20,out_dot_offset:10,out_dot_distance:20,edge_offset_y:20,edge_offset_x:0,tooltip:null,strokeWidth:"1.5",color:"#ccc",z_index:9,cnt_overflow:"auto",ftr_color:"white",ttr_color:"white",title:"",title_font:"sans-serif",title_size:"10px",title_color:"white"},A.propTypes={id:s.a.string.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),ttr_count:s.a.number,ftr_count:s.a.number,width:s.a.string,height:s.a.string,left:s.a.string,top:s.a.string,cx0:s.a.number,cy0:s.a.number,x0:s.a.number,y0:s.a.number,cnt_h:s.a.oneOfType([s.a.string,s.a.number]),hdr_h:s.a.oneOfType([s.a.string,s.a.number]),ttr_h:s.a.oneOfType([s.a.string,s.a.number]),ftr_h:s.a.oneOfType([s.a.string,s.a.number]),input_ids:s.a.arrayOf(s.a.string),output_ids:s.a.arrayOf(s.a.string),output_target_lists:s.a.arrayOf(s.a.arrayOf(s.a.string)),output_target_pl_lists:s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.number)))),in_dot_offset:s.a.number,in_dot_distance:s.a.number,out_dot_offset:s.a.number,out_dot_distance:s.a.number,edge_offset_y:s.a.number,edge_offset_x:s.a.number,tooltip:s.a.string,strokeWidth:s.a.string,color:s.a.string,ftr_color:s.a.string,ttr_color:s.a.string,z_index:s.a.number,cnt_overflow:s.a.string,title:s.a.string,title_font:s.a.string,title_size:s.a.oneOfType([s.a.string,s.a.number]),title_color:s.a.string};var X={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let W;const Y=new Uint8Array(16);function q(){if(!W&&(W="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(Y)}const V=[];for(let t=0;t<256;++t)V.push((t+256).toString(16).slice(1));function H(t,e=0){return(V[t[e+0]]+V[t[e+1]]+V[t[e+2]]+V[t[e+3]]+"-"+V[t[e+4]]+V[t[e+5]]+"-"+V[t[e+6]]+V[t[e+7]]+"-"+V[t[e+8]]+V[t[e+9]]+"-"+V[t[e+10]]+V[t[e+11]]+V[t[e+12]]+V[t[e+13]]+V[t[e+14]]+V[t[e+15]]).toLowerCase()}var $=function(t,e,r){if(X.randomUUID&&!e&&!t)return X.randomUUID();const n=(t=t||{}).random||(t.rng||q)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=n[t];return e}return H(n)};function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rt(n.key),n)}}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tt(t);if(e){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Z(t)}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e,r){return(e=rt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rt(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===F(e)?e:String(e)}function nt(t,e){return[e[0]-t[0],e[1]-t[1]]}function ot(t){return[-t[0],-t[1]]}function it(t){return Math.sqrt(ut(t,t))}function st(t,e){return t=t.length>0?t.slice(0,-1).concat([e]):[e]}function at(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.25,o=it(nt(t,e));return o<r*n}function ut(t,e){return t[0]*e[0]+t[1]*e[1]}function ct(t,e){return[t[0]*e,t[1]*e]}function ft(t){if(0==it(t))return t;if(0==t[1])return function(t){return[t[1],t[0]]}(function(t){return ct(t,1/it(t))}(t));var e=-t[0]/t[1],r=ct([1,e],1/it([1,e]));return t[0]*t[1]>0&&(r=ot(r)),r}function lt(t,e){var r=ft(e);ut(t,r)>0&&(r=ot(r));var n,o,i=it(t),s=function(t,e){var r=it(t),n=it(e);if(0==r||0==n)return 0;var o=ut(t,e)/(r*n);return o=Math.max(-1,Math.min(1,o)),Math.acos(o),Math.acos(o)}(t,e),a=ct(r,2*i*Math.sin(s));return n=t,[(o=a)[0]+n[0],o[1]+n[1]]}function pt(t,e,r){return[t[0]+e[0]*r,t[1]+e[1]*r]}function ht(t,e){return t}function dt(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,o=ot(nt(t,r)),i=nt(t,e),s=lt(o,i),a=pt(t,ht(ot(s)),n),u=pt(e,ht(o),n);return[a,u]}var gt={};var _t=null,vt=null;function yt(t,e){var r=t.getBoundingClientRect();return[r.x+e/2,r.y+e/2]}function bt(t,e){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return[r.x-n.x+r.width/2,r.y-n.y+r.height/2]}function mt(t){var e=gt[t];return bt(e[0],e[1].current)}var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(s,t);var e,r,n,i=K(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),et(Z(e=i.call(this,t)),"update_path",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=e.getProps("target_list"),i=e.getProps("target_pl_list");if(r&&e.getProps("output_targets_func")){var s=e.getProps("output_targets_func")();o=s[0],i=s[1],e.setProps({target_list:s[0]}),e.setProps({target_pl_list:s[1]})}var a=null,u=null;for(var c in o)a=o[c],u=i[c],n.push(e.get_path(st(u,mt(a))));if(t)n.push(e.get_path(e.getProps("pos_list").concat([[t.offsetX,t.offsetY]])));else{var f=e.getProps("pos_list");f.length>0&&n.push(e.get_path(f))}return e.setProps({path_list:n}),[e.getProps("is_input"),o,i]})),et(Z(e),"do_move",(function(t){e.is_moving()&&e.update_path(t)})),et(Z(e),"do_scroll",(function(t){console.log("scrolling"),e.is_moving()?e.update_path(t):e.update_path()})),et(Z(e),"do_up",(function(t){if(e.is_moving()&&vt){var r=e.set_target();e.stop_moving(),e.getProps("force_refresh")&&e.getProps("force_refresh")(r[0],r[1])}})),et(Z(e),"do_down",(function(t){(console.log("do down"),e.is_moving())?e.setProps({pos_list:e.getProps("pos_list").concat([[t.offsetX,t.offsetY]])}):at(yt(e.ref1,e.getProps("r")),[t.clientX,t.clientY],e.getProps("r"))&&(_t?e.getProps("is_input")&&(vt=e.getProps("id"),console.log("setting target id: "+vt)):e.getProps("is_input")||(e.clean_pos_list(),_t=e.getProps("id")))})),et(Z(e),"do_escape",(function(t){"Escape"==t.key&&e.is_moving()&&(console.log("escape"),e.stop_moving(),e.clean_pos_list())})),et(Z(e),"do_dblclick",(function(t){at(yt(e.ref1,e.getProps("r")),[t.clientX,t.clientY],e.getProps("r"))&&!e.getProps("is_input")&&(console.log("double clicked output"),e.clean_target_list()),e.stop_moving(),e.clean_pos_list()})),et(Z(e),"set_ref1",(function(t){e.getProps("dot_ref")&&e.getProps("dot_ref")(t),e.ref1=t})),et(Z(e),"hClick",(function(t){console.log("clicked")})),e.state=t,e.ref_svg=o.a.createRef(),e}return e=s,(r=[{key:"setProps",value:function(t){this.props.setProps?this.props.setProps(t):this.setState(t)}},{key:"getProps",value:function(t){return this.props.setProps?this.props[t]:this.state[t]}},{key:"update_ref_store",value:function(){gt[this.getProps("id")]=[this.ref1,this.ref_svg]}},{key:"clean_ref_store",value:function(){console.log("deleting: "+this.getProps("id")),delete gt[this.getProps("id")]}},{key:"componentDidUpdate",value:function(){this.update_ref_store()}},{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.do_move,!1),document.addEventListener("mousedown",this.do_down,!1),document.addEventListener("mouseup",this.do_up,!1),document.addEventListener("keydown",this.do_escape,!1),document.addEventListener("dblclick",this.do_dblclick,!1),window.addEventListener("scroll",this.do_scroll,!1),this.update_ref_store(),this.props.set_refresh&&this.props.set_refresh(this.update_path)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.do_move,!1),document.removeEventListener("mousedown",this.do_down,!1),document.removeEventListener("mouseup",this.do_up,!1),document.removeEventListener("keydown",this.do_escape,!1),window.removeEventListener("scroll",this.do_scroll,!1),this.clean_ref_store()}},{key:"clean_pos_list",value:function(){this.setProps({pos_list:[]}),this.update_path()}},{key:"clean_target_list",value:function(){this.setProps({target_list:[],target_pl_list:[]}),this.update_path(),this.getProps("force_refresh")&&this.getProps("force_refresh")([],[])}},{key:"is_moving",value:function(){return this.getProps("id")==_t}},{key:"stop_moving",value:function(){this.is_moving()&&(_t=null)}},{key:"get_path",value:function(t){return function(t){for(var e="",r=0;r<t.length;r++)if(0==r)e+="M ".concat(t[r][0]," ").concat(t[r][1]," ");else if(r==t.length-1)if(2==t.length)e+="L ".concat(t[r][0]," ").concat(t[r][1]," ");else{var n=dt(t[r],t[r-1],t[r-2]);e+="S ".concat(n[0][0]," ").concat(n[0][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}else if(1==r){var o=dt(t[r-1],t[r],t[r+1]);e+="C ".concat(o[0][0]," ").concat(o[0][1]," ").concat(o[1][0]," ").concat(o[1][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}else{var i=dt(t[r-1],t[r],t[r+1]);e+="S ".concat(i[1][0]," ").concat(i[1][1]," ").concat(t[r][0]," ").concat(t[r][1]," ")}return e}([bt(this.ref1,this.ref_svg.current)].concat(t))}},{key:"set_path",value:function(t){if(!(t.length<=0)){var e=this.get_path(t);this.setProps({path_list:this.getProps("path_list").concat([e])})}}},{key:"set_target",value:function(){var t=null;t=this.getProps("pos_list").length>0?this.getProps("pos_list").slice(0,-1).concat([mt(vt)]):[mt(vt)];var e=[],r=[],n=this.getProps("target_list"),o=this.getProps("target_pl_list"),i=!1;for(var s in n)n[s]==vt?(e.push(n[s]),r.push(t),i=!0):(e.push(n[s]),r.push(o[s]));return i||(e.push(vt),r.push(t)),this.setProps({target_list:e,target_pl_list:r}),this.clean_pos_list(),vt=null,[e,r]}},{key:"render",value:function(){var t=this;return o.a.createElement("svg",{height:"100%",width:"100%",style:{position:"absolute",zIndex:8},ref:this.ref_svg},o.a.createElement("circle",{id:$(),cx:this.getProps("x"),cy:this.getProps("y"),r:this.getProps("r"),fill:this.getProps("color"),ref:this.set_ref1,onClick:this.hClick}),this.getProps("path_list").map((function(e){return o.a.createElement("path",{key:$(),d:e,stroke:t.getProps("stroke"),strokeWidth:t.getProps("strokeWidth"),fill:t.getProps("fill")})})))}}])&&J(e.prototype,r),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);Pt.defaultProps={stroke:"#ccc",strokeWidth:"1.5",fill:"none",x:100,y:100,r:8,color:"#ccc",pos_list:[],path_list:[],target_list:[],target_pl_list:[],is_input:!1},Pt.propTypes={id:s.a.string.isRequired,stroke:s.a.string,strokeWidth:s.a.string,fill:s.a.string,x:s.a.number,y:s.a.number,r:s.a.number,color:s.a.string,pos_list:s.a.arrayOf(s.a.arrayOf(s.a.number)),path_list:s.a.arrayOf(s.a.string),target_list:s.a.arrayOf(s.a.string),target_pl_list:s.a.arrayOf(s.a.arrayOf(s.a.arrayOf(s.a.number))),is_input:s.a.bool},r.d(e,"BubbleTrain",(function(){return d})),r.d(e,"DrawCanvas",(function(){return j})),r.d(e,"DraggablePanel",(function(){return A})),r.d(e,"Connector",(function(){return Pt}))}]);
//# sourceMappingURL=bubble_train.min.js.map
//# sourceMappingURL=bubble_train.min.js.map