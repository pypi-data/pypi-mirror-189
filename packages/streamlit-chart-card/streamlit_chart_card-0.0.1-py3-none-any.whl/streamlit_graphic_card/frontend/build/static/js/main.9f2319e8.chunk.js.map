{"version":3,"sources":["StreamlitGraphicCard.tsx","index.tsx"],"names":["ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","arrowTableToArray","t","n","dataRows","res","i","push","getCell","content","options","responsive","plugins","legend","display","scales","x","grid","drawBorder","y","thresHoldDisplay","thresh","Typography","sx","fontWeight","tablesToData","title","defaultColor","threshColor","abs","Date","map","date","getDate","month","getMonth","toString","datasets","label","data","borderColor","backgroundColor","tension","pointRadius","borderWidth","pointHitRadius","StreamlitGraphicCard","state","props","args","labels","metrics","render","Box","padding","Card","height","width","CardContent","justifyContent","alignItems","marginTop","marginLeft","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9f2319e8.chunk.js","sourcesContent":["import {\n  ArrowTable,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport {Box, Card, CardContent, Typography} from \"@mui/material\"\nimport TrendingDownIcon from '@mui/icons-material/TrendingDown';\nimport TrendingFlatIcon from '@mui/icons-material/TrendingFlat';\nimport TrendingUpIcon from '@mui/icons-material/TrendingUp';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js'\nimport { Line } from 'react-chartjs-2'\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n)\n\ninterface State {\n}\n\ninterface Labels {\n  x: string,\n  y: string\n}\n\ntype Datum = string|number|Date\ntype Data = Datum[]\n\nconst arrowTableToArray = (t: ArrowTable): Data => {\n  const n = t.dataRows\n  const res: Data = []\n  for (let i = 1; i <= n; i++) {\n    res.push(t.getCell(i, 1).content as Datum)\n  }\n  return res\n}\n\nconst getMonthString = (month: number) => {\n  if (month + 1 < 10) {\n    return '0' + (month + 1).toString()\n  } else {\n    return (month + 1).toString()\n  }\n}\n\n// Add segment in datasets options with borderColor with function (ctx: any) => changeColor(ctx, ...)\n// const changeColor = (ctx: any, colorUpThresh: string, colorDownThresh: string, thresh: number) => {\n//   if (ctx.p0.raw <= thresh && ctx.p1.raw <= thresh) {\n//     return colorDownThresh\n//   } else {\n//     if (ctx.p0.raw > thresh && ctx.p1.raw > thresh) {\n//       return colorUpThresh\n//     } else {\n//       return colorUpThresh\n//     }\n//   }\n// }\n\nconst options = {\n  responsive: true,\n  plugins: {\n    legend: {\n      display: false\n    },\n  },\n  scales: {\n        x: {\n          grid: {\n            drawBorder: false,\n          }\n        },\n        y: {\n          grid: {\n            display: false,\n            drawBorder: false,\n          }\n        }\n      }\n}\n\nconst thresHoldDisplay = (thresh: number|null) => {\n  if (thresh !== null) {\n    return (\n      <Typography\n        sx={{\n          fontWeight: \"bold\"\n        }}\n      >\n        S = {thresh}\n      </Typography>\n    )\n  } else {\n    return (\n      <Typography\n        sx={{\n          fontWeight: \"bold\"\n        }}\n      >\n        S = Ø\n      </Typography>\n    )\n  }\n}\n\nconst tablesToData = (x: Data, y: Data, title: string, defaultColor: string, thresh: number|null, threshColor: string) => {\n    let abs = []\n    if (x[0] instanceof Date) {\n      // @ts-ignore\n      abs = x.map((date: Date) => `${date.getDate()}/${getMonthString(date.getMonth())}`)\n    } else {\n      abs = x\n    }\n    if (thresh == null) {\n      const data = {\n        \"labels\": abs,\n        datasets: [\n          {\n            label: title,\n            data: y,\n            borderColor: defaultColor,\n            backgroundColor: defaultColor,\n            tension: 0.5,\n            pointRadius: 2\n          },\n        ],\n      }\n      return data\n    } else {\n      const data = {\n        \"labels\": abs,\n        datasets: [\n          {\n            label: \"Seuil\",\n            data: y.map((data: Datum) => thresh),\n            borderColor: threshColor,\n            backgroundColor: threshColor,\n            borderWidth: 2,\n            pointRadius: 0,\n            pointHitRadius: 0\n          },\n          {\n            label: title,\n            data: y,\n            borderColor: defaultColor,\n            backgroundColor: defaultColor,\n            tension: 0.5,\n            pointRadius: 2\n          },\n        ],\n      }\n      return data\n    }\n  }\n\nclass StreamlitGraphicCard extends StreamlitComponentBase<State> {\n  public state: State = {}\n  private title: string = this.props.args[\"title\"]\n  private x: Data = arrowTableToArray(this.props.args[\"x\"])\n  private y: Data = arrowTableToArray(this.props.args[\"y\"])\n  private labels: Labels = this.props.args[\"labels\"]\n  private metrics = this.props.args[\"metrics\"]\n  private defaultColor: string = this.props.args[\"defaultColor\"]\n  private threshColor: string = this.props.args[\"threshColor\"]\n  private thresh: number|null = this.props.args[\"thresh\"]\n  private data = tablesToData(this.x, this.y, this.title, this.defaultColor, this.thresh, this.threshColor)\n\n  public render = (): ReactNode => {\n\n    return (\n      <Box\n        sx={{\n          padding: 2,\n        }}\n      >\n        <Card\n          sx={{\n            height: 250,\n            width: 290\n        }}\n        >\n          <CardContent>\n            <Box>\n              <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\"\n              }}\n              >\n                <Typography\n                  sx={{\n                    fontWeight: \"bold\"\n                  }}\n                >\n                  {this.title}\n                </Typography>\n                {thresHoldDisplay(this.thresh)}\n                <Typography\n                  sx={{\n                    fontWeight: \"bold\"\n                  }}\n                >\n                  {this.labels[\"y\"]}\n                </Typography>\n              </Box>\n              <Box\n                sx={{\n                  marginTop: 2,\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\"\n                }}\n              >\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\"\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      marginLeft: 1,\n                      fontWeight: \"bold\"\n                    }}\n                  >\n                    min\n                  </Typography>\n                  <Typography\n                  >\n                    ={this.metrics[\"min\"]}\n                  </Typography>\n                </Box>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\"\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      marginLeft: 1,\n                      fontWeight: \"bold\"\n                    }}\n                  >\n                    x̄\n                  </Typography>\n                  <Typography\n                  >\n                    ={this.metrics[\"mean\"]}\n                  </Typography>\n                </Box>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\"\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      marginLeft: 1,\n                      fontWeight: \"bold\"\n                    }}\n                  >\n                    max\n                  </Typography>\n                  <Typography\n                  >\n                    ={this.metrics[\"max\"]}\n                  </Typography>\n                </Box>\n              </Box>\n              <Box\n                sx={{\n                  marginTop: 2\n                }}\n              >\n                <Line options={options} data={this.data}></Line>\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n      </Box>\n    )\n  }\n}\n\nexport default withStreamlitConnection(StreamlitGraphicCard)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport StreamlitGraphicCard from \"./StreamlitGraphicCard\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <StreamlitGraphicCard />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}