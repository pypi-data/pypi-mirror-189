(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3657:function(e,t,n){Promise.resolve().then(n.bind(n,8568)),Promise.resolve().then(n.bind(n,507)),Promise.resolve().then(n.bind(n,8531)),Promise.resolve().then(n.t.bind(n,30,23)),Promise.resolve().then(n.bind(n,5512)),Promise.resolve().then(n.bind(n,6057)),Promise.resolve().then(n.bind(n,2341)),Promise.resolve().then(n.bind(n,8764)),Promise.resolve().then(n.bind(n,4313)),Promise.resolve().then(n.bind(n,6157)),Promise.resolve().then(n.bind(n,2582)),Promise.resolve().then(n.bind(n,6456)),Promise.resolve().then(n.bind(n,740)),Promise.resolve().then(n.bind(n,7903)),Promise.resolve().then(n.bind(n,3559)),Promise.resolve().then(n.bind(n,2621))},807:function(e){e.exports={pagination:"Pager_pagination__na24a",rounded:"Pager_rounded__yJi5K","left-bar":"Pager_left-bar__E6raY","right-bar":"Pager_right-bar__OUzxs"}},3451:function(e){e.exports={button:"Buttons_button__rNaL_","button-outline":"Buttons_button-outline__EJA3Q","active-button":"Buttons_active-button__sLTHn","kangas-title":"Buttons_kangas-title__huDj2","kangas-item":"Buttons_kangas-item__q9Ku4"}},4173:function(e){e.exports={invalid:"Filter_invalid__zvP8o"}},4354:function(e){e.exports={"matrix-select":"MatrixSelectClient_matrix-select__Vx0ZW"}},6281:function(e){e.exports={"cached-icon":"RefreshButton_cached-icon__I49AT"}},1221:function(e){e.exports={button:"SettingsBar_button__kgcuS","button-outline":"SettingsBar_button-outline__Z05BW","active-button":"SettingsBar_active-button__0YURC","kangas-title":"SettingsBar_kangas-title__4OCiA","kangas-item":"SettingsBar_kangas-item__1gtrE","settings-bar":"SettingsBar_settings-bar__LjqF4","left-settings-bar":"SettingsBar_left-settings-bar__KDAL9","right-settings-bar":"SettingsBar_right-settings-bar__05lEt","matrix-select":"SettingsBar_matrix-select__8Q7b_",pagination:"SettingsBar_pagination__yj9u5",selector:"SettingsBar_selector__3vaKl","multi-select-columns":"SettingsBar_multi-select-columns__Q97WD",title:"SettingsBar_title__s1iVF",subtitle:"SettingsBar_subtitle__pjNmh","multi-select-columns-body":"SettingsBar_multi-select-columns-body__uP7_R","button-row":"SettingsBar_button-row__qa7_i",reset:"SettingsBar_reset__EOaZB","select-modal-title":"SettingsBar_select-modal-title__dqCQ7","reset-button":"SettingsBar_reset-button__SyS2E",disabled:"SettingsBar_disabled__9llMh",enabled:"SettingsBar_enabled__RBaog","select-modal-body":"SettingsBar_select-modal-body__0ALp1","accordion-label":"SettingsBar_accordion-label__goUnx","accordion-content":"SettingsBar_accordion-content__ni4_t",active:"SettingsBar_active__ehazG","arrow-toggle":"SettingsBar_arrow-toggle__ZWHfI","MuiPaper-root":"SettingsBar_MuiPaper-root__JRgd6",expanded:"SettingsBar_expanded__UGHYm","MuiOutlinedInput-root":"SettingsBar_MuiOutlinedInput-root__gpsC_","MuiOutlinedInput-notchedOutline":"SettingsBar_MuiOutlinedInput-notchedOutline__9K__D","MuiInputBase-adornedEnd":"SettingsBar_MuiInputBase-adornedEnd__X77ZC","MuiAccordion--root":"SettingsBar_MuiAccordion--root__lJ481","MuiPopover-paper":"SettingsBar_MuiPopover-paper__9_xQh","react-select-list":"SettingsBar_react-select-list__Oc5IZ","react-autocomplete-input":"SettingsBar_react-autocomplete-input__Bw7Lq",main:"SettingsBar_main__Wep96","cell-verbatim":"SettingsBar_cell-verbatim__3qPB7","cached-icon":"SettingsBar_cached-icon__qXZAg",filter:"SettingsBar_filter__1Zjac"}},2764:function(e){e.exports={cell:"Cell_cell__ET96p",header:"Cell_header__pGPf6",group:"Cell_group__pjKTb",expanded:"Cell_expanded__9wpld","cell-content":"Cell_cell-content__noOl8","cell-json-expanded":"Cell_cell-json-expanded__8qfdc"}},1941:function(e){e.exports={"plotly-chart":"Charts_plotly-chart__hi5kw",expanded:"Charts_expanded__FHVTt","plotly-container":"Charts_plotly-container__WjAp0","chart-thumbnail":"Charts_chart-thumbnail__DAVWC"}},698:function(e){e.exports={"image-editor":"ImageCanvas_image-editor__D1brK","editor-controls":"ImageCanvas_editor-controls__i8lN8","canvas-column":"ImageCanvas_canvas-column__Cbpm5","canvas-container":"ImageCanvas_canvas-container__d1B5J"}},5549:function(e){e.exports={dialogue:"DialogueModal_dialogue__GSWOz","dialogue-toggle":"DialogueModal_dialogue-toggle__Q3Aj0",overlay:"DialogueModal_overlay__indsg"}},8591:function(e){e.exports={button:"SelectColumnDropdown_button__eOVl2","button-outline":"SelectColumnDropdown_button-outline___2Arx","active-button":"SelectColumnDropdown_active-button__Q6yW_","kangas-title":"SelectColumnDropdown_kangas-title__6gIyZ","kangas-item":"SelectColumnDropdown_kangas-item__WsMbi","select-modal":"SelectColumnDropdown_select-modal__ipwl1","select-modal-title":"SelectColumnDropdown_select-modal-title__HEEB1",disabled:"SelectColumnDropdown_disabled__AHroG",enabled:"SelectColumnDropdown_enabled__o46Jm","reset-button":"SelectColumnDropdown_reset-button__V2bF7","select-modal-body":"SelectColumnDropdown_select-modal-body__E9qRd","react-select-container":"SelectColumnDropdown_react-select-container__txM8H","button-row-footer":"SelectColumnDropdown_button-row-footer__T0xpD"}},7643:function(){},2621:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var l=n(1844),r=n(9330),a=n(5784),i=n(8933),o=n(3451),s=n.n(o),c=n(7166),u=n.n(c),d=n(507);u().bind(s()),u().bind(s());let h=e=>{let{text:t}=e;return(0,l.jsx)(d.default,{toggleElement:(0,l.jsx)("div",{style:{color:"#5155f5"},children:(0,l.jsx)("span",{children:"About this DataGrid"})}),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"540px"}}},children:(0,l.jsx)("div",{style:{display:"flex"},children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:t},style:{width:"500px",overflow:"auto",border:"solid blue",borderWidth:"thin"}})})})};var g=n(807),p=n.n(g);let v=u().bind(p()),m=e=>{let{aboutText:t,firstRow:n,totalRows:o,currentPage:s,totalPages:c,maxRow:u,pageSize:d}=e,{params:g,updateParams:p}=(0,i.Z)(),m=(0,a.useRef)(),f=""!==t?(0,l.jsx)(h,{text:t}):(0,l.jsx)(l.Fragment,{}),b=e=>e>0&&e<=c&&e!==s,x=(0,a.useCallback)(e=>{b(e)&&p({page:e})},[p]);(0,a.useCallback)(e=>{p({rows:e,page:1})},[p]);let _=(0,a.useCallback)(e=>{if((null==e?void 0:e.keyCode)===13||(null==e?void 0:e.code)==="Enter"){let t=parseInt(e.target.value);t&&x(t)}},[x]);(0,a.useEffect)(()=>{(null==m?void 0:m.current)&&(m.current.value=s)},[s]);let y=(0,a.useMemo)(()=>!b(1),[s,c]),j=(0,a.useMemo)(()=>!b(c),[s,c]),S=(0,a.useMemo)(()=>!b(s+1),[s,c]),C=(0,a.useMemo)(()=>!b(s-1),[s,c]);return(0,l.jsxs)("div",{className:v("pagination"),children:[(0,l.jsx)("div",{className:v("left-bar"),children:f}),(0,l.jsxs)("div",{className:v("right-bar"),children:[(0,l.jsxs)("span",{children:["Showing ","".concat(n.toLocaleString(r.Z.locale)," - ").concat(u.toLocaleString(r.Z.locale)," of ").concat(o.toLocaleString(r.Z.locale)," rows")]}),(0,l.jsx)("button",{className:v("rounded"),onClick:()=>x(1),disabled:y,children:"|<"}),(0,l.jsx)("button",{className:v("rounded"),onClick:()=>x(s-1),disabled:C,children:"<"}),(0,l.jsx)("span",{children:"Page"}),(0,l.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",onKeyDown:e=>_(e),disabled:c<=1,ref:m,defaultValue:s,style:{width:"50px",margin:"0 8px",textAlign:"center",fontSize:"12px",fontWeight:"500"}}),(0,l.jsxs)("span",{children:["of ","".concat(c.toLocaleString(r.Z.locale))]}),(0,l.jsx)("button",{className:v("rounded"),onClick:()=>x(s+1),disabled:S,children:">"}),(0,l.jsx)("button",{className:v("rounded"),onClick:()=>x(c),disabled:j,children:">|"})]})]})};var f=m},740:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(5724),a=n(3451),i=n.n(a),o=n(7166),s=n.n(o),c=n(8901),u=n(130);let d=s().bind(i()),h=()=>{let{open:e,toggleOpen:t,anchor:n}=(0,c.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:d("button-outline"),onClick:t,ref:n,children:[(0,l.jsx)("img",{src:"/group_placeholder.png"})," ",(0,l.jsx)("span",{children:"Group by"})]}),(0,l.jsx)(r.ZP,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},className:"popover-select",open:e,onClose:t,anchorEl:null==n?void 0:n.current,children:(0,l.jsx)(u.Z,{toggleOpen:t,group:!0})})]})};t.default=h},7903:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var l=n(1844),r=n(3451),a=n.n(r),i=n(7166),o=n.n(i),s=n(507),c=n(5784),u=n(7003),d=n(5241),h=n(887),g=n(2339),p=n(5587),v=n(4686),m=n(9305),f=n(8933),b=n(1221),x=n.n(b);let _=o().bind(x()),y=e=>{let t=e=>{e.preventDefault(),e.stopPropagation()},n={...e.innerProps,onMouseDown:t},{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s}=(0,p.nB)({id:e.data.id}),c={transform:v.ux.Transform.toString(o),transition:s};return(0,l.jsx)("div",{style:c,ref:i,...r,...a,children:(0,l.jsx)(u.c.MultiValue,{...e,innerProps:n})})},j=e=>{let{isOver:t,setNodeRef:n}=(0,h.Zj)({id:"droppable"});return(0,l.jsx)("div",{style:{color:t?"green":void 0},ref:n,children:(0,l.jsx)(u.c.MultiValueContainer,{...e})})},S=e=>(0,l.jsx)(u.c.MultiValueRemove,{...e,innerProps:{onPointerDown:e=>e.stopPropagation(),...e.innerProps},children:(0,l.jsx)("div",{style:{width:"100%",height:"100%",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:"x"})}),C=e=>(0,l.jsx)(u.c.Menu,{className:_("react-select-list"),...e}),w=e=>{let{columns:t={}}=e,{params:n,updateParams:r}=(0,f.Z)(),[a,i]=(0,c.useState)([]),{closeModal:o}=(0,c.useContext)(m.t),s=(0,c.useCallback)(e=>i([...e],[])),u=(0,c.useCallback)(e=>{let{active:t,over:n}=e;t&&n&&i(e=>{let l=e.findIndex(e=>e.id===t.id),r=e.findIndex(e=>e.id===n.id);return(0,p.Rp)(e,l,r)})},[]),v=(0,c.useMemo)(()=>null==t?void 0:t.map((e,t)=>({id:t+1,label:e,value:e})),[t]),b=(0,c.useCallback)(()=>i(v),[v]),x=(0,c.useCallback)(()=>{if(a.length>0){let e=a.map(e=>e.value);r({select:e.join(",")})}else r({select:void 0});o()},[a,r,o]);(0,c.useEffect)(()=>{var e;let t=null==n?void 0:null===(e=n.select)||void 0===e?void 0:e.split(",").map(e=>v.find(t=>t.value.toLowerCase()===e.toLowerCase()));(null==t?void 0:t.length)?i([...t]):i([...v])},[v,null==n?void 0:n.select]);let w=(0,c.useMemo)(()=>({valueContainer:(e,t)=>({...e,overflow:"auto",padding:"5px 6px"}),multiValue:(e,t)=>({...e,backgroundColor:"#E5E5FE",alignItems:"center"}),multiValueLabel:(e,t)=>({...e,color:"#5155F5",fontSize:"12px",fontWeight:"400",textTransform:"uppercase"}),multiValueRemove:(e,t)=>({...e,backgroundColor:"#AFB0FB",borderRadius:"100%",height:"14px",width:"14px",marginLeft:"8px",marginRight:"8px",fontSize:"10px",color:"white",display:"flex",alignItems:"center"})}),[]);return(0,l.jsxs)("div",{className:_("multi-select-columns"),children:[(0,l.jsx)("div",{className:_("title"),children:"Column Selection & Ordering"}),(0,l.jsx)("div",{className:_("subtitle"),children:"Add and remove column tags to update the table"}),(0,l.jsxs)("div",{className:_("multi-select-columns-body"),children:[(0,l.jsx)(h.LB,{modifiers:[g.F4],onDragEnd:u,children:(0,l.jsx)(p.Fo,{items:a,strategy:p.PG,children:(0,l.jsx)(d.ZP,{styles:w,distance:4,isMulti:!0,options:v,value:a,onChange:s,components:{MultiValue:y,MultiValueContainer:j,MultiValueRemove:S,Menu:C},closeMenuOnSelect:!1})})}),(0,l.jsxs)("div",{className:_("button-row"),children:[(0,l.jsx)("div",{className:_("reset"),onClick:b,children:"Reset Defaults"}),(0,l.jsx)("button",{className:_("button"),onClick:x,children:"Done"})]})]})]})},k=o().bind(a()),N=e=>{let{columns:t}=e;return(0,l.jsx)(s.default,{toggleElement:(0,l.jsxs)("div",{className:k("button-outline"),children:[(0,l.jsx)("img",{src:"/columns_placeholder.png"})," ",(0,l.jsx)("span",{children:"Columns"})]}),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"540px"}}},children:(0,l.jsx)(w,{columns:t})})};var O=N},3559:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(5724),a=n(3451),i=n.n(a),o=n(7166),s=n.n(o),c=n(8901),u=n(130);let d=s().bind(i()),h=()=>{let{open:e,toggleOpen:t,anchor:n}=(0,c.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:d("button-outline"),onClick:t,ref:n,children:[(0,l.jsx)("img",{src:"/group_placeholder.png"})," ",(0,l.jsx)("span",{children:"Sort By"})]}),(0,l.jsx)(r.ZP,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},className:"popover-select",onClose:t,open:e,anchorEl:null==n?void 0:n.current,children:(0,l.jsx)(u.Z,{toggleOpen:t})})]})};t.default=h},6456:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var l=n(1844),r=n(5784),a=n(5697),i=n.n(a),o=n(6496),s=n.n(o),c=n(5424),u=n.n(c),d=n(2349),h=n(4137),g=n(5996),p=n(3451),v=n.n(p),m=n(1221),f=n.n(m),b=n(7166),x=n.n(b);x().bind(v());let _=x().bind(f()),y=e=>{let{callback:t}=e;return(0,l.jsx)(h.Z,{position:"end",style:{cursor:"pointer"},children:(0,l.jsx)(g.Z,{onClick:t,color:"primary",fontSize:"small"})})},j={clearFilter:i().func,onKeyPress:i().func,defaultValue:i().string,disabled:i().bool,maxOptions:i().number,onBlur:i().func,onChange:i().func,onKeyDown:i().func,onRequestOptions:i().func,onSelect:i().func,changeOnSelect:i().func,options:i().oneOfType([i().object,i().arrayOf(i().string)]),regex:i().string,matchAny:i().bool,minChars:i().number,requestOnlyIfNoOptions:i().bool,spaceRemovers:i().arrayOf(i().string),spacer:i().string,trigger:i().oneOfType([i().string,i().arrayOf(i().string)]),value:i().string,offsetX:i().number,offsetY:i().number,passThroughEnter:i().bool,refInput:i().shape({current:i().any}),status:i().string};class S extends r.Component{componentDidMount(){window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){let{options:t}=this.props,{caret:n}=this.state;t.length!==e.options.length&&this.updateHelper(this.recentValue,n,t)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getMatch(e,t,n){let{trigger:l,matchAny:r,regex:a}=this.props,i=RegExp(a),o=l;Array.isArray(o)||(o=Array(l)),o.sort();let s=n;Array.isArray(n)&&o.forEach(e=>{s[e]=n});let c=this.arrayTriggerMatch(o,i),u=null;for(let d=0;d<c.length;d++){let{triggerStr:h,triggerMatch:g,triggerLength:p}=c[d];for(let v=t-1;v>=0;--v){let m=e.substring(v,t),f=m.match(i),b=-1;if(p>0){let x=g?v:v-p+1;if(x<0||(this.isTrigger(h,e,x)&&(b=x+p),!f&&b<0))break}else{if(f&&v>0)continue;if(t-(b=0===v&&f?0:v+1)==0)break}if(b>=0){let _=s[h];if(null==_)continue;let y=e.substring(b,t),j=_.filter(e=>{let t=e.toLowerCase().indexOf(y.toLowerCase());return -1!==t&&(r||0===t)}),S=y.length;u=null===u?{trigger:h,matchStart:b,matchLength:S,options:j}:{...u,trigger:h,matchStart:b,matchLength:S,options:j}}}}return u}arrayTriggerMatch(e,t){let n=e.map(e=>({triggerStr:e,triggerMatch:e.match(t),triggerLength:e.length}));return n}isTrigger(e,t,n){return!e||!e.length||t.substr(n,e.length)===e}handleChange(e){let{onChange:t,options:n,spaceRemovers:l,spacer:r,value:a}=this.props,i=this.recentValue,o=e.target.value,s=u()(e.target).end;if(o.length||this.setState({helperVisible:!1}),this.recentValue=o,this.setState({caret:s,value:e.target.value}),!o.length||!s)return t(e.target.value);if(this.enableSpaceRemovers&&l.length&&o.length>2&&r.length){for(let c=0;c<Math.max(i.length,o.length);++c)if(i[c]!==o[c]){if(c>=2&&o[c-1]===r&&-1===l.indexOf(o[c-2])&&-1!==l.indexOf(o[c])&&this.getMatch(o.substring(0,c-2),s-3,n)){let d="".concat(o.slice(0,c-1)).concat(o.slice(c,c+1)).concat(o.slice(c-1,c)).concat(o.slice(c+1));return this.updateCaretPosition(c+1),this.refInput.current.value=d,a||this.setState({value:d}),t(d)}break}this.enableSpaceRemovers=!1}return this.updateHelper(o,s,n),a||this.setState({value:e.target.value}),t(e.target.value)}handleKeyDown(e){let{helperVisible:t,options:n,selection:l}=this.state,{onKeyDown:r,passThroughEnter:a}=this.props;if(t)switch(e.keyCode){case 27:e.preventDefault(),this.resetHelper();break;case 38:e.preventDefault(),this.setState({selection:(n.length+l-1)%n.length});break;case 40:e.preventDefault(),this.setState({selection:(l+1)%n.length});break;case 14:case 13:a||e.preventDefault(),this.handleSelection(l);break;case 9:this.handleSelection(l);break;default:r(e)}else r(e)}handleResize(){this.setState({helperVisible:!1})}handleSelection(e){let{spacer:t,onSelect:n,changeOnSelect:l}=this.props,{matchStart:r,matchLength:a,options:i,trigger:o}=this.state,s=i[e],c=this.recentValue,u=0===o.length?"":c.substring(0,r-o.length),d=c.substring(r+a),h={target:this.refInput.current},g=l(o,s);h.target.value="".concat(u).concat(g).concat(t).concat(d),this.handleChange(h),n(h.target.value),this.resetHelper(),this.updateCaretPosition(u.length+g.length+1),this.enableSpaceRemovers=!0}updateCaretPosition(e){this.setState({caret:e},()=>(0,c.setCaretPosition)(this.refInput.current,e))}updateHelper(e,t,n){let l=this.refInput.current,r=this.getMatch(e,t,n);if(r){let a=s()(l,t),i=l.getBoundingClientRect(),o=a.top+l.offsetTop,c=Math.min(a.left+l.offsetLeft-10,l.offsetLeft+i.width-100),{minChars:u,onRequestOptions:d,requestOnlyIfNoOptions:h}=this.props;r.matchLength>=u&&(r.options.length>1||1===r.options.length&&(r.options[0].length!==r.matchLength||1===r.options[0].length))?this.setState({helperVisible:!0,top:o,left:c,...r}):(h&&r.options.length||d(e.substr(r.matchStart,r.matchLength)),this.resetHelper())}else this.resetHelper()}resetHelper(){this.setState({helperVisible:!1,selection:0})}renderAutocompleteList(){let{helperVisible:e,left:t,matchStart:n,matchLength:r,options:a,selection:i,top:o,value:s}=this.state;if(this.props.status,!e)return null;let{maxOptions:c,offsetX:u,offsetY:d}=this.props;if(0===a.length)return null;if(i>=a.length)return this.setState({selection:0}),null;let h=0===c?a.length:c,g=a.slice(0,h).map((e,t)=>{let a=e.toLowerCase().indexOf(s.substr(n,r).toLowerCase());return(0,l.jsxs)("li",{className:t===i?_("active"):null,onClick:()=>{this.handleSelection(t)},onMouseEnter:()=>{this.setState({selection:t})},children:[e.slice(0,a),(0,l.jsx)("strong",{children:e.substr(a,r)}),e.slice(a+r)]},e)});return(0,l.jsx)("ul",{className:_("react-autocomplete-input"),style:{left:t+u,top:o+d},children:g})}render(){let{onKeyPress:e,clearFilter:t,defaultValue:n,disabled:r,onBlur:a,value:i,status:o,...s}=this.props,{value:c}=this.state,u=Object.assign({},s);Object.keys(j).forEach(e=>{delete u[e]});let h="";return null!=i?h=i:null!==c?h=c:n&&(h=n),(0,l.jsxs)("div",{style:{position:"relative ",display:"flex"},children:[(0,l.jsx)(d.Z,{autoComplete:"off",disabled:r,onBlur:a,onChange:this.handleChange,onKeyDown:this.handleKeyDown,inputRef:this.refInput,value:h,InputProps:{endAdornment:(0,l.jsx)(y,{callback:t}),sx:{fontSize:"13px",width:"360px"}},inputProps:{spellCheck:!1},onKeyPress:e,...u}),this.renderAutocompleteList()]})}constructor(e){super(e),this.isTrigger=this.isTrigger.bind(this),this.arrayTriggerMatch=this.arrayTriggerMatch.bind(this),this.getMatch=this.getMatch.bind(this),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleResize=this.handleResize.bind(this),this.handleSelection=this.handleSelection.bind(this),this.updateCaretPosition=this.updateCaretPosition.bind(this),this.updateHelper=this.updateHelper.bind(this),this.resetHelper=this.resetHelper.bind(this),this.renderAutocompleteList=this.renderAutocompleteList.bind(this),this.state={helperVisible:!1,left:0,trigger:null,matchLength:0,matchStart:0,options:[],selection:0,top:0,value:null},this.recentValue=e.defaultValue,this.enableSpaceRemovers=!1,this.refInput=e.refInput}}S.propTypes=j,S.defaultProps={defaultValue:"",disabled:!1,maxOptions:6,onBlur:()=>{},onChange:()=>{},onKeyDown:()=>{},onRequestOptions:()=>{},onSelect:()=>{},changeOnSelect:(e,t)=>e+t,options:[],regex:"^[A-Za-z0-9\\-_]+$",matchAny:!1,minChars:0,requestOnlyIfNoOptions:!0,spaceRemovers:[",",".","!","?"],spacer:" ",trigger:"@",offsetX:0,offsetY:0,value:null,passThroughEnter:!1,status:"VALID"};var C=n(8933),w=n(4173),k=n.n(w);let N=x().bind(k()),O=e=>{let{query:t,completions:n}=e,{params:a,updateParams:i}=(0,C.Z)(),o=(0,r.useRef)(),s=(0,r.useRef)(),[c,u]=(0,r.useState)(),d=(0,r.useCallback)(e=>{u("LOADING"),fetch("/api/filter?dgid=".concat(null==a?void 0:a.datagrid,"&where=").concat(e)).then(e=>e.json()).then(e=>{(null==e?void 0:e.valid)?u("VALID"):u("INVALID")})},[a]),h=(0,r.useCallback)(e=>{if("LOADING"!==c)try{clearTimeout(s.current)}catch(t){}finally{s.current=setTimeout(()=>d(e),150)}},[d,c]),g=e=>{if(void 0!==e&&""!==e)return e},p=(0,r.useCallback)(e=>{if("Enter"===e.key&&"VALID"===c){var t;i({filter:g(null==o?void 0:null===(t=o.current)||void 0===t?void 0:t.value),page:void 0})}},[i,c]),v=(0,r.useCallback)(e=>{i({filter:void 0,page:void 0})},[i]);(0,r.useEffect)(()=>{var e;void 0!==(null==o?void 0:null===(e=o.current)||void 0===e?void 0:e.value)&&(o.current.value=(null==t?void 0:t.whereExpr)||"")},[t]);let m=(0,r.useCallback)((e,t)=>"{"===e?"{".concat(t,"}"):e.endsWith(".")?"".concat(e).concat(t):" ".concat(t),[t]),f=(0,r.useMemo)(()=>n?["{"].concat(Object.keys(n)):["{"],[n]);return(0,r.useEffect)(()=>{var e,t,n,l;"INVALID"===c?null==o||null===(e=o.current)||void 0===e||null===(t=e.classList)||void 0===t||t.add(N("invalid")):null==o||null===(n=o.current)||void 0===n||null===(l=n.classList)||void 0===l||l.remove(N("invalid"))},[c]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(S,{defaultValue:(null==t?void 0:t.whereExpr)||"",trigger:f,options:n,changeOnSelect:m,matchAny:!0,regex:'^[a-zA-Z0-9_\\-\\"]+$',spacer:"",maxOptions:0,spaceRemovers:["."],placeholder:'e.g.: {"column name"} > 0.5',id:"filter",onKeyPress:p,clearFilter:v,refInput:o,onChange:h})})};var E=O},2582:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(5241);n(9332),n(1664);var a=n(5784),i=n(8933),o=n(7166),s=n.n(o),c=n(4354),u=n.n(c),d=n(1458);let h=s().bind(u()),g=e=>{let{query:t,options:n=["blah"]}=e,{params:o,updateParams:s,prefetch:c}=(0,i.Z)(),{config:u}=(0,a.useContext)(d.ConfigContext),g=(0,a.useCallback)(e=>{s({datagrid:e.value,filter:void 0,sort:void 0,group:void 0,descending:void 0,page:void 0,rows:void 0,select:void 0})},[s]);return!u.hideSelector&&(0,l.jsx)(r.ZP,{id:"matrix-select-pulldown",className:h("matrix-select"),value:n.find(e=>{var t;return null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.endsWith(null==o?void 0:o.datagrid)})||"",options:n,styles:{menuPortal:e=>({...e,zIndex:9999}),menu:e=>({...e,zIndex:9999})},onChange:g})};t.default=g},6157:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(3707),a=n(5784),i=n(8933),o=n(6281),s=n.n(o),c=n(7166),u=n.n(c);let d=u().bind(s()),h=e=>{let{query:t}=e,{params:n,updateParams:o}=(0,i.Z)(),s=(0,a.useCallback)(()=>{o({sort:void 0,group:void 0,page:void 0,rows:void 0,filter:void 0,descending:void 0,select:void 0})});return(0,l.jsx)("div",{onClick:s,children:(0,l.jsx)(r.Z,{className:d("cached-icon")})})};t.default=h},8764:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(5784);let a=e=>{let{children:t}=e;return(0,r.useEffect)(()=>(console.log("Mounting"),()=>console.log("Unmounting")),[]),(0,l.jsx)(l.Fragment,{children:t})};t.default=a},4313:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var l=n(1844),r=n(5784),a=n(8568),i=n(7166),o=n.n(i),s=n(2764),c=n.n(s),u=n(6312),d=n(2786);let h=e=>{let{value:t,style:n}=e;return(0,l.jsx)("div",{className:"cell-content",style:n,children:"".concat((0,d.Z)(t,"TEXT"))})};var g=n(9330);let p=async e=>{let{url:t,query:n={},method:l="GET",cache:r=g.Z.cache,json:a=!0,returnUrl:i=!1,...o}=e;try{let s="",c={method:l,headers:{},...o};"GET"===l?s=new URLSearchParams(Object.fromEntries(Object.entries({...n,returnUrl:!!i||void 0}).filter(e=>{let[t,n]=e;return null!=n}))).toString():c.body=JSON.stringify(n),r?c.next={revalidate:1440}:c.cache="no-store";let u=await fetch("".concat(t,"?").concat(s),c);if(!a)return u;{let d=await u.json();if(i)return d.uri;return d}}catch(h){return{}}};var v=n(1186);let m=async e=>{var t;let n=await p({url:"".concat(g.Z.apiUrl,"category"),query:e});if((null==n?void 0:n.type)==="verbatim")return{isVerbatim:!0,...n};let l=Object.keys(null!==(t=null==n?void 0:n.values)&&void 0!==t?t:{}).sort().reduce((e,t)=>(e[t]=null==n?void 0:n.values[t],e),{}),r=[{type:"bar",orientation:"h",x:Object.values(l),y:Object.keys(l),text:Object.keys(l).map(e=>"".concat(null==n?void 0:n.column,": ").concat(e," ").concat((null==n?void 0:n.message)||"")),marker:{color:Object.keys(l).map(v.Lq)}}];return r};var f=n(8531),b=n(1941),x=n.n(b);let _=o().bind(x()),y=async e=>{let{value:t,expanded:n}=e,r=await m(t);if(null==r?void 0:r.isVerbatim)return(0,l.jsx)(l.Fragment,{children:"Verbatim"});if(n)return(0,l.jsx)(f.default,{expanded:n,title:null==t?void 0:t.columnName,query:t,columnName:null==t?void 0:t.columnName,data:r});{let a=new URLSearchParams(Object.fromEntries(Object.entries({chartType:"category",data:JSON.stringify(r)}).filter(e=>{let[t,n]=e;return null!=n}))).toString();return(0,l.jsx)("img",{src:"/api/charts?".concat(a),loading:"lazy",className:_(["chart-thumbnail","category"])})}},j=e=>e!==Object(e),S=o().bind(c()),C=e=>{let{value:t,expanded:n=!1}=e,a=j(t);return(0,l.jsxs)("div",{className:S(["cell","group"],{expanded:n}),children:[a&&(0,d.Z)(t),!a&&(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"Loading"}),children:(0,l.jsx)(y,{value:t,expanded:n})})]})};var w=n(507);let k=e=>{let{value:t,query:n,style:r}=e;return(null==n?void 0:n.groupBy)?(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(C,{value:t,query:n}),children:(0,l.jsx)(C,{value:t,query:n,expanded:!0})}):(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(h,{value:t,query:n,style:r}),children:(0,l.jsx)(h,{value:t,query:n})})},N=e=>{let{value:t,style:n}=e;return(0,l.jsx)("div",{className:"cell-content",style:n,children:"".concat((0,d.Z)(t,"FLOAT"))})},O=async e=>{var t;let n=await p({url:"".concat(g.Z.apiUrl,"histogram"),query:e});if((null==n?void 0:n.type)==="verbatim")return{isVerbatim:!0,...n};let l=[{type:"bar",x:"DATETIME"===n.columnType?n.labels.map(e=>(0,d.Z)(e,"DATETIME")):n.labels,y:n.bins,text:null==n?void 0:null===(t=n.labels)||void 0===t?void 0:t.map(e=>"".concat(n.column,": ").concat((0,d.Z)(e,n.columnType)," ").concat(n.message||"")),marker:{color:(0,v.Lq)(n.column)}}];return l};var E=n(2341);let P=o().bind(x()),M=async e=>{let{value:t,expanded:n}=e,r=await O(t);if(null==r?void 0:r.isVerbatim)return(0,l.jsx)(l.Fragment,{children:"Verbatim"});if(n)return(0,l.jsx)(E.default,{expanded:n,title:null==t?void 0:t.columnName,query:t,data:r});{let a=new URLSearchParams(Object.fromEntries(Object.entries({chartType:"histogram",data:JSON.stringify(r)}).filter(e=>{let[t,n]=e;return null!=n}))).toString();return(0,l.jsx)("img",{src:"/api/charts?".concat(a),loading:"lazy",className:P(["chart-thumbnail","category"])})}},D=o().bind(c()),L=e=>{let{value:t,expanded:n=!1}=e,a=j(t);return(0,l.jsxs)("div",{className:D(["cell","group"],{expanded:n}),children:[a&&(0,d.Z)(t),!a&&(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"Loading"}),children:(0,l.jsx)(M,{value:t,expanded:n})})]})},A=e=>{let{value:t,query:n,style:a}=e;return(null==n?void 0:n.groupBy)?(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"FD"}),children:(0,l.jsx)(L,{value:t,query:n})}),children:(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"Loading"}),children:(0,l.jsx)(L,{value:t,query:n,expanded:!0})})}):(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(N,{value:t,query:n,style:a}),children:(0,l.jsx)(N,{value:t,query:n})})},B=o().bind(c()),I=e=>{let{value:t,query:n,style:r,expanded:a=!1}=e,i=(0,l.jsx)("div",{className:B("cell-content"),style:r,children:(0,l.jsx)("pre",{children:JSON.stringify(t)})}),o=(0,l.jsx)("div",{className:B("cell-json-expanded"),style:r,children:(0,l.jsx)("pre",{children:JSON.stringify(t,null,4)})});return(null==n?void 0:n.groupBy)?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(w.default,{toggleElement:i,children:o})},T=e=>{let{thumbnail:t,group:n}=e;return n?t?"asset-group-thumbnail":"asset-group":"download"},R=async e=>{let{query:t,returnUrl:n=!1,thumbnail:l=!1,json:r=!0}=e,a=T({thumbnail:l,group:!!(null==t?void 0:t.groupBy)}),i=await p({url:"".concat(g.Z.apiUrl).concat(a),query:{...t,thumbnail:l},json:r,returnUrl:n});return i},Z=async e=>{let{assetId:t,dgid:n,timestamp:l}=e,r=await p({url:"".concat(g.Z.apiUrl,"asset-metadata"),query:{assetId:t,dgid:n,timestamp:l}});return r};var q=n(5512),V=n(6057);let z=async e=>{let{value:t,query:n}=e,{type:a,assetType:i,assetId:o}=t,{dgid:s,timestamp:c}=n,u=await R({query:{assetId:o,dgid:s,timestamp:c},returnUrl:!0,json:!0}),d=await Z({assetId:o,dgid:s,timestamp:c});return(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"Loading"}),children:(0,l.jsx)(q.default,{value:JSON.parse(d),children:(0,l.jsx)(V.default,{value:t,query:n,metadata:JSON.parse(d),image:u})})})};n(5675);let U=o().bind(c()),F=async e=>{let{value:t,query:n,expanded:r=!1,style:a}=e,i=T({thumbnail:!0,group:!!(null==n?void 0:n.groupBy)}),o=new URLSearchParams({assetId:null==t?void 0:t.assetId,dgid:null==n?void 0:n.dgid,timestamp:null==n?void 0:n.timestamp,thumbnail:!0,endpoint:i}).toString();return(0,l.jsx)("div",{className:U("cell-content"),style:a,children:(0,l.jsx)("img",{src:"/api/image?".concat(o),alt:"DataGrid Image"})})},W=e=>{let{value:t,query:n,expanded:a,style:i}=e;return(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)(l.Fragment,{children:"Loading"}),children:(0,l.jsx)(a?z:F,{value:t,query:n,expanded:a,style:i})})},H=o().bind(c()),G=async e=>{let{value:t,query:n,columnName:r,expanded:a}=e,i=await R({query:{gallerySize:[3,2],backgroundColor:[255,255,255],imageSize:[100,55],borderWidth:2,...t},returnUrl:!0,thumbnail:!0});return(0,l.jsx)("div",{className:H(["cell","group"]),children:(0,l.jsx)("img",{src:"data:application/octet-stream;base64,".concat(i),alt:"DataGrid Image"})})},K=e=>{let{value:t,query:n,columnName:r,expanded:a}=e;return a?(0,l.jsx)(z,{value:t,query:n,columnName:r,expanded:a}):(0,l.jsx)(G,{value:t,query:n,columnName:r,expanded:a})},J=e=>{let{value:t,columnName:n,query:r,style:a}=e;return(null==r?void 0:r.groupBy)?(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(K,{value:t,columnName:n,query:r}),children:(0,l.jsx)(K,{value:t,columnName:n,query:r,expanded:!0})}):(0,l.jsx)(w.default,{toggleElement:(0,l.jsx)(W,{value:t,query:r,expanded:!1,style:a}),children:(0,l.jsx)(W,{value:t,query:r,expanded:!0})})};var Y={TEXT:{width:200,groupedWidth:200,component:k},FLOAT:{width:150,groupedWidth:200,component:A},INTEGER:{width:100,groupedWidth:200,component:k},JSON:{width:400,groupedWidth:200,component:I},"IMAGE-ASSET":{width:150,groupedWidth:300,component:J},ROW_ID:{width:50,groupedWidth:100,component:k}};let Q=(e,t)=>t&&void 0!==Y[e]?Y[e].groupedWidth:void 0!==Y[e]?Y[e].width:(console.log("ERROR: missing cell type: ".concat(e)),200),X=o().bind(c()),$=e=>{var t;let{columnName:n,type:i,isHeader:o,children:s,grouped:c}=e,{columns:d,updateWidth:h}=(0,r.useContext)(a.ViewContext),[g,p]=(0,r.useState)(!1),[v,m]=(0,r.useState)(Q(i,c)),f=(0,r.useCallback)(e=>{var t;h({[n]:{width:v+(null!==(t=null==e?void 0:e.width)&&void 0!==t?t:0)}})},[n,v]),b=(0,r.useCallback)(()=>p(!0),[]),x=(0,r.useCallback)(()=>p(!1),[]);return(0,r.useEffect)(()=>{var e,t,l;g||(null==d?void 0:null===(e=d[n])||void 0===e?void 0:e.width)===v||m(null!==(l=null==d?void 0:null===(t=d[n])||void 0===t?void 0:t.width)&&void 0!==l?l:v)},[g,null==d?void 0:null===(t=d[n])||void 0===t?void 0:t.width,v]),(0,l.jsx)(u.e,{className:X("cell",{header:o,group:c}),handleStyles:o?{right:{width:"1px",backgroundColor:"silver",border:"2px ridge silver",borderRadius:"2px",right:"0px",height:"100%",top:"-2px"}}:{right:{backgroundColor:"#fafafa"}},size:{width:v,height:0},enable:{right:!0},onResizeStart:b,onResize:(e,t,n,l)=>{f(l)},onResizeStop:x,children:s})};var ee=$},8531:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(7166),a=n.n(r);n(507);var i=n(1941),o=n.n(i),s=n(5784),c=n(9332),u=n(5152),d=n.n(u);let h=d()(()=>Promise.all([n.e(960),n.e(283)]).then(n.bind(n,8660)),{loadableGenerated:{webpack:()=>[8660]},ssr:!1}),g=a().bind(o()),p={paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0,type:"category"}},v={displayModeBar:!1},m=e=>{let{expanded:t,title:n,query:r,columnName:a,data:i}=e,[o,u]=(0,s.useState)(!1),d=(0,s.useRef)(),m=(0,s.useCallback)((e,t)=>{e.forEach(e=>{e.isIntersecting&&u(!0)})},[]),f=(0,s.useMemo)(()=>({autosize:!0,title:n,font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{type:"category"}}),[n]),b=(0,c.useRouter)(),x=(0,s.useCallback)(e=>{e.event.preventDefault(),e.event.stopPropagation();let t='{"'.concat(r.groupBy,'"} == "').concat(r.columnValue,'" and {"').concat(a,'"} == "').concat(e.points[0].label,'"');r.filter&&(t="".concat(r.filter," and ").concat(t)),b.push("/?datagrid=".concat(r.dgid,"&filter=").concat(t))},[i,a]);return(0,s.useEffect)(()=>{let e=new IntersectionObserver(m,{root:null,rootMargin:"0px",threshold:0});e.observe(d.current)},[m]),(0,l.jsx)("div",{ref:d,className:g("plotly-container",{expanded:t}),children:o&&(0,l.jsx)(h,{className:g("plotly-chart",{expanded:t}),data:i,layout:t?f:p,config:v,onClick:x})})};t.default=m},2341:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(7166),a=n.n(r),i=n(1941),o=n.n(i),s=n(5784),c=n(5152),u=n.n(c);n(2786);let d=u()(()=>Promise.all([n.e(960),n.e(283)]).then(n.bind(n,8660)),{loadableGenerated:{webpack:()=>[8660]},ssr:!1}),h=a().bind(o()),g={paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0}},p={displayModeBar:!1},v=e=>{let{value:t,expanded:n,title:r,data:a}=e,[i,o]=(0,s.useState)(!1),c=(0,s.useRef)(),u=(0,s.useCallback)((e,t)=>{e.forEach(e=>{e.isIntersecting&&o(!0)})},[]);(0,s.useEffect)(()=>{let e=new IntersectionObserver(u,{root:null,rootMargin:"0px",threshold:0});e.observe(c.current)},[u]);let v=(0,s.useMemo)(()=>({autosize:!0,title:r,font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{font:{size:13,color:"#3D4355"}}}),[r]);return(0,l.jsx)("div",{ref:c,className:h("plotly-container",{expanded:n}),children:i&&(0,l.jsx)(d,{className:h("plotly-chart",{expanded:n}),data:a,layout:n?v:g,config:p})})};t.default=v},6057:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var l=n(1844),r=n(5784),a=n(698),i=n.n(a),o=n(7166),s=n.n(o);let c=e=>{let[t,n]=(0,r.useState)(0),[l,a]=(0,r.useState)({}),i=(0,r.useMemo)(()=>{let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;if(null==e?void 0:e.annotations)for(let l of Object.values(e.annotations))for(let r of Object.values(l))void 0!==(null==r?void 0:r.score)&&(r.score<t&&(t=r.score),r.score>n&&(n=r.score));return{min:t,max:n}},[null==e?void 0:e.annotations]),o=(0,r.useMemo)(()=>{var n;return null!=e&&e.annotations?null===(n=e.annotations)||void 0===n?void 0:n.data.filter(e=>(!(null==e?void 0:e.score)||(null==e?void 0:e.score)>t)&&!(null==l?void 0:l[null==e?void 0:e.label])):[]},[null==e?void 0:e.overlays,t,l]),s=(0,r.useCallback)(e=>n(e.target.value),[]),c=(0,r.useCallback)(e=>{if(null==l?void 0:l[e.label]){let{[e.label]:t,...n}=l;a(n)}else a({...l,[e.label]:!0})},[l]);return{labels:o,scoreRange:i,updateScore:s,toggleLabel:c}};var u=n(1186),d=n(5512);let h=s().bind(i()),g=e=>{let{label:t,toggle:n}=e,r=(0,u.Lq)(t.label),a=(0,u.Qg)(r);return(0,l.jsx)("div",{onClick:()=>n(t),style:{background:r,color:a},children:"".concat(null==t?void 0:t.label)})},p=e=>{let{image:t}=e,n=(0,r.useRef)(),a=(0,r.useRef)(),{metadata:i}=(0,r.useContext)(d.CanvasContext),{labels:o,scoreRange:s,updateScore:p,toggleLabel:v}=c(i);console.log(o);let m=(0,r.useCallback)(()=>{var e;let l=null===(e=n.current)||void 0===e?void 0:e.getContext("2d");l.clearRect(0,0,n.current.width,n.current.height);let r=new Image;r.onload=()=>l.drawImage(r,0,0),r.src="data:application/octet-stream;base64,".concat(t)},[t]),f=(0,r.useCallback)(()=>{var e;let t=null===(e=a.current)||void 0===e?void 0:e.getContext("2d");for(let n of(t.clearRect(0,0,a.current.width,a.current.height),t.imageSmoothingEnabled=!0,o))if(null==n?void 0:n.regions)for(let l of n.regions){t.fillStyle=(0,u.Lq)(n.label),t.beginPath(),t.moveTo(l[0],l[1]);for(let r=2;r<l.length;r+=2)t.lineTo(l[r],l[r+1]);t.closePath(),t.fill()}else if(null==n?void 0:n.boxes)for(let i of n.boxes){let[s,c,d,h]=i;t.strokeStyle=(0,u.Lq)(n.label),t.lineWidth=3,t.beginPath(),t.moveTo(1*s,1*c),t.lineTo((s+d)*1,1*c),t.lineTo((s+d)*1,(c+h)*1),t.lineTo(1*s,(c+h)*1),t.closePath(),t.stroke()}},[i,o]);return(0,r.useEffect)(()=>{m()},[m]),(0,r.useEffect)(()=>{f()},[f]),(0,l.jsxs)("div",{className:h("image-editor"),children:[(0,l.jsxs)("div",{className:h("editor-controls"),children:[(0,l.jsx)("div",{className:"score-control",children:(0,l.jsxs)("div",{className:"slider-container",children:[(0,l.jsx)("div",{className:"zoom-label",children:"Score:"}),(0,l.jsx)("input",{type:"range",min:"".concat(s.min),max:"".concat(s.max),defaultValue:"".concat(s.min),className:"zoom-slider",id:"zoom-slide",step:"0.001",onChange:p})]})}),(0,l.jsx)("div",{className:h("labels-container"),children:null==o?void 0:o.map(e=>(0,l.jsx)(g,{toggle:v,label:e}))})]}),(0,l.jsx)("div",{className:h("canvas-column"),children:(0,l.jsxs)("div",{className:h("canvas-container"),children:[(0,l.jsx)("canvas",{ref:n,height:472,width:492}),(0,l.jsx)("canvas",{ref:a,height:472,width:492})]})})]})};var v=p},5512:function(e,t,n){"use strict";n.r(t),n.d(t,{CanvasContext:function(){return a}});var l=n(1844),r=n(5784);let a=(0,r.createContext)({metadata:{}}),i=e=>{let{value:t,children:n}=e;return(0,l.jsx)(a.Provider,{value:{metadata:{...t}},children:n})};t.default=i},1458:function(e,t,n){"use strict";n.r(t),n.d(t,{ConfigContext:function(){return a}});var l=n(1844),r=n(5784);let a=(0,r.createContext)({config:{apiUrl:null,otherUrl:null,isColab:!1,hideSelector:!1}}),i=(e,t)=>"UPDATE_CONFIG"===t.type?{config:{...e.config,...t.payload}}:e,o=e=>{let{value:t,children:n}=e,[o,s]=(0,r.useReducer)(i,t);return(0,l.jsx)(a.Provider,{value:{config:null==o?void 0:o.config,updateConfig:e=>s({type:"UPDATE_CONFIG",payload:e})},children:n})};t.default=o},9305:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var l=n(1844),r=n(5784);let a=(0,r.createContext)({closeModal:()=>null,openModal:()=>null}),i=e=>{let{value:t,children:n}=e;return(0,l.jsx)(a.Provider,{value:{openModal:null==t?void 0:t.openModal,closeModal:null==t?void 0:t.closeModal},children:n})};t.Z=i},8568:function(e,t,n){"use strict";n.r(t),n.d(t,{ViewContext:function(){return a}});var l=n(1844),r=n(5784);let a=(0,r.createContext)({columns:{},query:{}}),i=(e,t)=>{switch(t.type){case"RESIZE_COL_WIDTH":return{...e,columns:{...e.columns,...t.payload}};case"NEW_COLUMNS":return{columns:{...t.payload.columns},query:{...t.payload.query}};case"UPDATE_COL_STATUS":return{...e,columns:{...e.columns,[t.payload.column]:{...e.columns[t.payload.column],isLoading:t.payload.isLoading}}};case"UPDATE_QUERY":return{...e,query:{...t.payload.query}};default:return e}},o=e=>{let{value:t,children:n}=e,[o,s]=(0,r.useReducer)(i,t);return(0,r.useEffect)(()=>{var e,n,l,r;let a=(null==o?void 0:null===(e=o.query)||void 0===e?void 0:e.dgid)!==(null==t?void 0:null===(n=t.query)||void 0===n?void 0:n.dgid)||(null==o?void 0:null===(l=o.query)||void 0===l?void 0:l.groupBy)!==(null==t?void 0:null===(r=t.query)||void 0===r?void 0:r.groupBy);a&&s({type:"NEW_COLUMNS",payload:{columns:t.columns,query:t.query}})},[null==o?void 0:o.query,null==t?void 0:t.query,s]),(0,l.jsx)(a.Provider,{value:{columns:o.columns,updateWidth:e=>s({type:"RESIZE_COL_WIDTH",payload:e}),toggleLoading:e=>s({type:"UPDATE_COL_STATUS",payload:e})},children:n})};t.default=o},507:function(e,t,n){"use strict";n.r(t);var l=n(1844),r=n(5784),a=n(8262),i=n(7166),o=n.n(i),s=n(5549),c=n.n(s),u=n(9305);let d=o().bind(c()),h=e=>{let{toggleElement:t,children:n,sx:i,tabIndex:o,fullScreen:s=!1}=e,[c,h]=(0,r.useState)(!1),g=(0,r.useCallback)(()=>h(!1),[]),p=(0,r.useCallback)(()=>h(!0),[]);return t?(0,l.jsxs)(u.Z,{value:{closeModal:g,openModal:p},children:[(0,l.jsx)("div",{className:d("dialogue-toggle"),tabIndex:o,onClick:p,children:t}),(0,l.jsx)(a.Z,{className:d("dialogue"),open:c,fullScreen:s,onClose:g,sx:i,children:n})]}):(0,l.jsx)("div",{onClick:p,tabIndex:o,className:d(["dialogue-toggle","overlay"]),children:(0,l.jsx)(a.Z,{className:d("dialogue"),open:c,fullScreen:s,onClose:g,sx:i,children:n})})};t.default=h},130:function(e,t,n){"use strict";var l=n(1844),r=n(5784),a=n(5241),i=n(8568),o=n(8933),s=n(5503),c=n(813),u=n(8591),d=n.n(u),h=n(7166),g=n.n(h);n(7643);let p=g().bind(d()),v=e=>{let{toggle:t,sortDesc:n}=e;return(0,l.jsxs)("div",{className:p("arrow-toggle"),onClick:t,children:[n&&(0,l.jsx)(s.Z,{}),!n&&(0,l.jsx)(c.Z,{})]})},m=e=>{let{toggleOpen:t,group:n=!1}=e,{params:s,updateParams:c}=(0,o.Z)(),{columns:u}=(0,r.useContext)(i.ViewContext),[d,h]=(0,r.useState)(),g=(0,r.useCallback)(()=>{c({descending:((null==s?void 0:s.descending)!=="true").toString()})},[s,c]),m=(0,r.useCallback)(()=>{h(null),t()},[t]),f=(0,r.useCallback)(e=>{d&&(n?c({group:d[0].value,sort:d[0].value,rows:4,page:void 0}):c({sort:d[0].value}),t())},[n,d,c,t]),b=(0,r.useCallback)(()=>{n?c({group:void 0,page:void 0,rows:void 0}):c({sort:void 0}),t()}),x=(0,r.useMemo)(()=>Object.keys(u).map((e,t)=>({id:t+1,label:e,value:e})),[u]),_=(0,r.useCallback)(e=>{h(null==x?void 0:x.filter(t=>t.value===e.value))},[x]);return(0,l.jsxs)("div",{className:p("select-modal"),children:[(0,l.jsxs)("div",{className:p("select-modal-title"),children:[(0,l.jsx)("div",{children:"Select a column"}),(0,l.jsx)("div",{className:p("reset-button"),onClick:b,children:"Reset to default"})]}),(0,l.jsx)("div",{className:p("select-modal-body"),children:(0,l.jsxs)("div",{className:p("react-select-container"),children:[(0,l.jsx)(a.ZP,{value:null!=d?d:x.filter(e=>e.label===(n?null==s?void 0:s.group:null==s?void 0:s.sort)),options:x,onChange:_}),!n&&(0,l.jsx)(v,{toggle:g,sortDesc:(null==s?void 0:s.descending)==="true"})]})}),(0,l.jsxs)("div",{className:p("button-row-footer"),children:[(0,l.jsx)("div",{className:p("button-outline"),onClick:m,children:"Cancel"}),(0,l.jsx)("div",{className:p("button"),onClick:f,children:"Done"})]})]})};t.Z=m},9330:function(e,t,n){"use strict";var l=n(3454);let r={apiUrl:"".concat(l.env.KANGAS_PROTOCOL||"http","://").concat(l.env.KANGAS_HOST,":").concat(l.env.KANGAS_BACKEND_PORT,"/datagrid/"),rootUrl:"".concat(l.env.KANGAS_PROTOCOL||"http","://").concat(l.env.KANGAS_HOST,":").concat(l.env.PORT,"/"),defaultDecimalPrecision:5,locale:"en-US",isColab:!1,hideSelector:"1"===l.env.KANGAS_HIDE_SELECTOR,cache:!0,prefetch:!1};t.Z=r},2786:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var l=n(9330);let r=e=>{if(Math.floor(e)===e)return 0;let[,t=""]=e.toString().split(".");return t.length},a=(e,t)=>{let n=null!=t?t:l.Z.defaultDecimalPrecision;if(null===n)return e;let a=Number(e);if(isNaN(a))return e;if(Number.isInteger(a)||r(a)<=n)return a;let i=10**n;return Math.floor(a*i)/i};function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return String(e).padStart(t,n)}class o{format(){return"00"===this.hour&&"00"===this.minute&&"00"===this.second?"".concat(this.year,"-").concat(this.month,"-").concat(this.day):"".concat(this.year,"-").concat(this.month,"-").concat(this.day," ").concat(this.hour,":").concat(this.minute,":").concat(this.second)}constructor(e){this.obj=new Date(1e3*e),this.year=i(this.obj.getFullYear(),4),this.month=i(this.obj.getMonth()+1,2),this.day=i(this.obj.getDate(),2),this.hour=i(this.obj.getHours(),2),this.minute=i(this.obj.getMinutes(),2),this.second=i(this.obj.getSeconds(),2)}}var s=function(e,t){if(null===e)return"None";let n=e;if("DATETIME"===t){let l=new o(e);n=l.format("YYYY-MM-DD HH:mm:ss")}else"FLOAT"===t?n=a(e).toString():"string"!=typeof e&&(n=e.toString());return n}},1186:function(e,t,n){"use strict";n.d(t,{Lq:function(){return r},Qg:function(){return i}});let l=e=>{let t=["#ffd51d","#ffbd00","#ff8900","#fb7628","#ff4747","#e51772","#cf0057","#6e1d89","#860dab","#49a5bd","#0096c7","#00b4d8","#12a592","#16cab2","#41ead4"];return t[e%t.length]},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";if(["1","true","t","yes"].includes(e.toLowerCase()))return"#12a592";if(["0","false","f","no"].includes(e.toLowerCase()))return"#cf0057";let t=[...e].reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0);return l(Math.abs(t))},a=e=>{let t=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},i=e=>{let t=a(e),n=t[0],l=t[1],r=t[2];return Math.round((299*n+587*l+114*r)/1e3)>125?"black":"white"}},8901:function(e,t,n){"use strict";var l=n(5784);let r=e=>{let[t,n]=(0,l.useState)(!1),r=(0,l.useRef)(null),a=(0,l.useCallback)(()=>{n(!t)},[t]);return{open:t,toggleOpen:a,anchor:r}};t.Z=r},8933:function(e,t,n){"use strict";var l=n(9332),r=n(5784),a=n(9330);let i=()=>{let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),n=(0,r.useMemo)(()=>{let e={};for(let[n,l]of t)e[n]=l;return e},[t]),i=(0,r.useCallback)(n=>{let l=new URLSearchParams(t.toString());for(let r in n)l.has(r)&&l.delete(r),void 0!==n[r]&&l.append(r,n[r]);e.push("/?".concat(l.toString()))},[t,e]),o=(0,r.useCallback)(n=>{let l=new URLSearchParams(t.toString());for(let r in n)l.get(r)&&l.delete(r),void 0!==n[r]&&l.append(r,n[r]);a.Z.prefetch&&e.prefetch("/?".concat(l.toString()))},[t,e]);return{params:n,updateParams:i,prefetch:o}};t.Z=i},2431:function(){}},function(e){e.O(0,[294,17,744],function(){return e(e.s=3657)}),_N_E=e.O()}]);