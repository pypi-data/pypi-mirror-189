[build-system]
build-backend="setuptools.build_meta"
requires=["pip>=22.3", "setuptools==67.0", "wheel"]

[project]
authors=[{name="The InvokeAI Project", email="lincoln.stein@gmail.com"}]
classifiers=[
  'Development Status :: 4 - Beta',
  'Environment :: GPU :: NVIDIA CUDA',
  'Environment :: GPU',
  'Environment :: MacOS X',
  'Intended Audience :: Developers',
  'Intended Audience :: End Users/Desktop',
  'License :: OSI Approved :: MIT License',
  'Operating System :: MacOS',
  'Operating System :: Microsoft :: Windows',
  'Operating System :: POSIX :: Linux',
  'Programming Language :: Python :: 3 :: Only',
  'Programming Language :: Python :: 3.10',
  'Programming Language :: Python :: 3.8',
  'Programming Language :: Python :: 3.9',
  'Topic :: Artistic Software',
  'Topic :: Internet :: WWW/HTTP :: WSGI :: Application',
  'Topic :: Internet :: WWW/HTTP :: WSGI :: Server',
  'Topic :: Multimedia :: Graphics',
  'Topic :: Scientific/Engineering :: Artificial Intelligence',
  'Topic :: Scientific/Engineering :: Image Processing',
]
dependencies=[
  "accelerate",
  "albumentations",
  "clip_anytorch",                         # replacing "clip @ https://github.com/openai/CLIP/archive/eaa22acb90a5876642d0507623e859909230a52d.zip",
  "datasets",
  "diffusers[torch]~=0.11",
  "dnspython==2.2.1",
  "einops",
  "eventlet",
  "facexlib",
  "flask==2.1.3",
  "flask_cors==3.0.10",
  "flask_socketio==5.3.0",
  "flaskwebgui==1.0.3",
  "getpass_asterisk",
  "gfpgan==1.3.8",
  "huggingface-hub>=0.11.1",
  "imageio",
  "imageio-ffmpeg",
  "k-diffusion",                           # replacing "k-diffusion @ https://github.com/Birch-san/k-diffusion/archive/refs/heads/mps.zip",
  "kornia",
  "npyscreen",
  "numpy~=1.23",
  "omegaconf",
  "opencv-python",
  "picklescan",
  "pillow",
  "pudb",
  "pypatchmatch",
  "pyreadline3",
  "pytorch-lightning==1.7.7",
  "realesrgan",
  "requests==2.25.1",
  "safetensors",
  "scikit-image>=0.19",
  "send2trash",
  "streamlit",
  "taming-transformers-rom1504",
  "test-tube>=0.7.5",
  "torch-fidelity",
  "torch>=1.13.1",
  "torchmetrics",
  "torchvision>=0.14.1",
  "transformers~=4.25",
  "windows-curses; sys_platform=='win32'",
]
description="An implementation of Stable Diffusion which provides various new features and options to aid the image generation process"
dynamic=["version"]
keywords=["AI", "stable-diffusion"]
license={file="LICENSE"}
name="InvokeAI"
readme={content-type="text/markdown", file="README.md"}
requires-python=">=3.9, <3.11"

[project.optional-dependencies]
"dev"=["black", "flake8", "isort"]
"dist"=["delocate; sys_platform=='darwin'", "pip-tools", "pipdeptree", "twine"]
"docs"=[
  "mkdocs-git-revision-date-localized-plugin",
  "mkdocs-material<9.0",
  "mkdocs-redirects==1.2.0",
]
"test"=["pytest-cov", "pytest>6.0.0"]
"xformers"=["xformers"]

[project.scripts]
"configure_invokeai"="ldm.invoke.configure_invokeai:main"
"invoke"="ldm.invoke.CLI:main"
"merge_models"="ldm.invoke.merge_diffusers:main"          # note name munging
"textual_inversion"="ldm.invoke.textual_inversion:main"

[project.urls]
"Bug Reports"="https://github.com/invoke-ai/InvokeAI/issues"
"Discord"="https://discord.gg/ZmtBAhwWhy"
"Documentation"="https://invoke-ai.github.io/InvokeAI/"
"Homepage"="https://invoke-ai.github.io/InvokeAI/"
"Source"="https://github.com/invoke-ai/InvokeAI/"

[tool.setuptools.dynamic]
version={attr="ldm.invoke.__version__"}

[tool.setuptools.packages.find]
"include"=["assets", "backend*", "configs*", "frontend.dist*", "ldm*"]
"where"=["."]

[tool.setuptools.package-data]
"assets"=["caution.png"]
"backend"=["**.png"]
"configs"=["**/*.yaml", "*.example", "*.txt"]
"frontend.dist"=["**"]

[tool.setuptools.exclude-package-data]
configs=["models.yaml"]

[tool.pytest.ini_options]
addopts="-p pytest_cov --junitxml=junit/test-results.xml --cov=./ldm/ --cov=./backend --cov-branch"
minversion="6.0"
python_files=["test_*.py"]
pythonpath=[".venv/lib/python3.10", ".venv/lib/python3.9"]
testpaths=["tests"]
