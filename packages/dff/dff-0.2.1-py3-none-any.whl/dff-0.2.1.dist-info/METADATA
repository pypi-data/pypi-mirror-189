Metadata-Version: 2.1
Name: dff
Version: 0.2.1
Summary: The Dialog Flow Framework (DFF) allows you to write conversational services. The service is written by defining a special dialog graph that describes the behavior of the dialog service. The dialog graph contains the dialog script. DFF offers a specialized language (DSL) for quickly writing dialog graphs. You can use it in such services for writing skills for Amazon Alexa and etc, chat-bots for social networks, websites call-centers and etc.
Home-page: https://github.com/deeppavlov/dialog_flow_framework
Author: Denis Kuznetsov
Author-email: kuznetsov.den.p@gmail.com
Keywords: chatbots
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Build Tools
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3 :: Only
Requires-Python: >=3.7, <4
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pydantic (>=1.8.2)
Requires-Dist: nest-asyncio (>=1.5.5)
Requires-Dist: typing-extensions (>=4.0.0)
Provides-Extra: core
Requires-Dist: pydantic (>=1.8.2) ; extra == 'core'
Requires-Dist: nest-asyncio (>=1.5.5) ; extra == 'core'
Requires-Dist: typing-extensions (>=4.0.0) ; extra == 'core'
Provides-Extra: devel
Requires-Dist: bump2version (>=1.0.1) ; extra == 'devel'
Requires-Dist: build (==0.7.0) ; extra == 'devel'
Requires-Dist: twine (==4.0.0) ; extra == 'devel'
Provides-Extra: devel_full
Requires-Dist: mypy ; extra == 'devel_full'
Requires-Dist: ydb (>=2.5.0) ; extra == 'devel_full'
Requires-Dist: sphinx-autodoc-typehints (>=1.19.4) ; extra == 'devel_full'
Requires-Dist: nbsphinx (>=0.8.9) ; extra == 'devel_full'
Requires-Dist: pydantic (>=1.8.2) ; extra == 'devel_full'
Requires-Dist: cryptography (>=36.0.2) ; extra == 'devel_full'
Requires-Dist: sphinx (>=1.7.9) ; extra == 'devel_full'
Requires-Dist: sphinxcontrib-apidoc (==0.3.0) ; extra == 'devel_full'
Requires-Dist: twine (==4.0.0) ; extra == 'devel_full'
Requires-Dist: psycopg2-binary (==2.9.4) ; extra == 'devel_full'
Requires-Dist: nest-asyncio (>=1.5.5) ; extra == 'devel_full'
Requires-Dist: pytest-asyncio (<0.15.0,>=0.14.0) ; extra == 'devel_full'
Requires-Dist: redis (>=4.1.2) ; extra == 'devel_full'
Requires-Dist: dff-sphinx-theme (>=0.1.17) ; extra == 'devel_full'
Requires-Dist: sphinx-gallery (==0.7.0) ; extra == 'devel_full'
Requires-Dist: jupyter (>=1.0.0) ; extra == 'devel_full'
Requires-Dist: black (==20.8b1) ; extra == 'devel_full'
Requires-Dist: flask[async] (>=2.1.2) ; extra == 'devel_full'
Requires-Dist: bson (>=0.5.10) ; extra == 'devel_full'
Requires-Dist: jupytext (>=1.14.1) ; extra == 'devel_full'
Requires-Dist: psutil (>=5.9.1) ; extra == 'devel_full'
Requires-Dist: sphinxcontrib-httpdomain (>=1.8.0) ; extra == 'devel_full'
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'devel_full'
Requires-Dist: click (<=8.0.4) ; extra == 'devel_full'
Requires-Dist: isort (<6.0.0,>=5.0.6) ; extra == 'devel_full'
Requires-Dist: sqlalchemy (<2.0,>=1.4.27) ; extra == 'devel_full'
Requires-Dist: pymysql (>=1.0.2) ; extra == 'devel_full'
Requires-Dist: pytest (<7.0.0,>=6.2.4) ; extra == 'devel_full'
Requires-Dist: sphinxcontrib-katex (==0.9.0) ; extra == 'devel_full'
Requires-Dist: build (==0.7.0) ; extra == 'devel_full'
Requires-Dist: pymongo (==4.3.2) ; extra == 'devel_full'
Requires-Dist: bump2version (>=1.0.1) ; extra == 'devel_full'
Requires-Dist: typing-extensions (>=4.0.0) ; extra == 'devel_full'
Requires-Dist: sphinx-copybutton (>=0.5) ; extra == 'devel_full'
Requires-Dist: flake8 (<4.0.0,>=3.8.3) ; extra == 'devel_full'
Requires-Dist: pytest-cov (<3.0.0,>=2.12.0) ; extra == 'devel_full'
Requires-Dist: requests (>=2.28.1) ; extra == 'devel_full'
Provides-Extra: doc
Requires-Dist: sphinx (>=1.7.9) ; extra == 'doc'
Requires-Dist: dff-sphinx-theme (>=0.1.17) ; extra == 'doc'
Requires-Dist: sphinxcontrib-apidoc (==0.3.0) ; extra == 'doc'
Requires-Dist: sphinxcontrib-httpdomain (>=1.8.0) ; extra == 'doc'
Requires-Dist: sphinxcontrib-katex (==0.9.0) ; extra == 'doc'
Requires-Dist: sphinx-copybutton (>=0.5) ; extra == 'doc'
Requires-Dist: sphinx-gallery (==0.7.0) ; extra == 'doc'
Requires-Dist: sphinx-autodoc-typehints (>=1.19.4) ; extra == 'doc'
Requires-Dist: nbsphinx (>=0.8.9) ; extra == 'doc'
Requires-Dist: jupytext (>=1.14.1) ; extra == 'doc'
Requires-Dist: jupyter (>=1.0.0) ; extra == 'doc'
Provides-Extra: examples
Requires-Dist: ydb (>=2.5.0) ; extra == 'examples'
Requires-Dist: pydantic (>=1.8.2) ; extra == 'examples'
Requires-Dist: cryptography (>=36.0.2) ; extra == 'examples'
Requires-Dist: psycopg2-binary (==2.9.4) ; extra == 'examples'
Requires-Dist: nest-asyncio (>=1.5.5) ; extra == 'examples'
Requires-Dist: pytest-asyncio (<0.15.0,>=0.14.0) ; extra == 'examples'
Requires-Dist: redis (>=4.1.2) ; extra == 'examples'
Requires-Dist: requests (>=2.28.1) ; extra == 'examples'
Requires-Dist: black (==20.8b1) ; extra == 'examples'
Requires-Dist: flask[async] (>=2.1.2) ; extra == 'examples'
Requires-Dist: bson (>=0.5.10) ; extra == 'examples'
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'examples'
Requires-Dist: click (<=8.0.4) ; extra == 'examples'
Requires-Dist: isort (<6.0.0,>=5.0.6) ; extra == 'examples'
Requires-Dist: sqlalchemy (<2.0,>=1.4.27) ; extra == 'examples'
Requires-Dist: pymysql (>=1.0.2) ; extra == 'examples'
Requires-Dist: pytest (<7.0.0,>=6.2.4) ; extra == 'examples'
Requires-Dist: pymongo (==4.3.2) ; extra == 'examples'
Requires-Dist: typing-extensions (>=4.0.0) ; extra == 'examples'
Requires-Dist: flake8 (<4.0.0,>=3.8.3) ; extra == 'examples'
Requires-Dist: pytest-cov (<3.0.0,>=2.12.0) ; extra == 'examples'
Requires-Dist: psutil (>=5.9.1) ; extra == 'examples'
Provides-Extra: full
Requires-Dist: pymongo (==4.3.2) ; extra == 'full'
Requires-Dist: psycopg2-binary (==2.9.4) ; extra == 'full'
Requires-Dist: nest-asyncio (>=1.5.5) ; extra == 'full'
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'full'
Requires-Dist: ydb (>=2.5.0) ; extra == 'full'
Requires-Dist: redis (>=4.1.2) ; extra == 'full'
Requires-Dist: sqlalchemy (<2.0,>=1.4.27) ; extra == 'full'
Requires-Dist: typing-extensions (>=4.0.0) ; extra == 'full'
Requires-Dist: pymysql (>=1.0.2) ; extra == 'full'
Requires-Dist: cryptography (>=36.0.2) ; extra == 'full'
Requires-Dist: pydantic (>=1.8.2) ; extra == 'full'
Requires-Dist: bson (>=0.5.10) ; extra == 'full'
Provides-Extra: mongodb
Requires-Dist: pymongo (==4.3.2) ; extra == 'mongodb'
Requires-Dist: bson (>=0.5.10) ; extra == 'mongodb'
Provides-Extra: mysql
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'mysql'
Requires-Dist: pymysql (>=1.0.2) ; extra == 'mysql'
Requires-Dist: cryptography (>=36.0.2) ; extra == 'mysql'
Provides-Extra: postgresql
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'postgresql'
Requires-Dist: psycopg2-binary (==2.9.4) ; extra == 'postgresql'
Provides-Extra: redis
Requires-Dist: redis (>=4.1.2) ; extra == 'redis'
Provides-Extra: sqlite
Requires-Dist: sqlalchemy (<2.0,>=1.4.27) ; extra == 'sqlite'
Provides-Extra: test_full
Requires-Dist: ydb (>=2.5.0) ; extra == 'test_full'
Requires-Dist: pydantic (>=1.8.2) ; extra == 'test_full'
Requires-Dist: cryptography (>=36.0.2) ; extra == 'test_full'
Requires-Dist: psycopg2-binary (==2.9.4) ; extra == 'test_full'
Requires-Dist: nest-asyncio (>=1.5.5) ; extra == 'test_full'
Requires-Dist: pytest-asyncio (<0.15.0,>=0.14.0) ; extra == 'test_full'
Requires-Dist: redis (>=4.1.2) ; extra == 'test_full'
Requires-Dist: requests (>=2.28.1) ; extra == 'test_full'
Requires-Dist: black (==20.8b1) ; extra == 'test_full'
Requires-Dist: flask[async] (>=2.1.2) ; extra == 'test_full'
Requires-Dist: bson (>=0.5.10) ; extra == 'test_full'
Requires-Dist: sqlalchemy (>=1.4.27) ; extra == 'test_full'
Requires-Dist: click (<=8.0.4) ; extra == 'test_full'
Requires-Dist: isort (<6.0.0,>=5.0.6) ; extra == 'test_full'
Requires-Dist: sqlalchemy (<2.0,>=1.4.27) ; extra == 'test_full'
Requires-Dist: pymysql (>=1.0.2) ; extra == 'test_full'
Requires-Dist: pytest (<7.0.0,>=6.2.4) ; extra == 'test_full'
Requires-Dist: pymongo (==4.3.2) ; extra == 'test_full'
Requires-Dist: typing-extensions (>=4.0.0) ; extra == 'test_full'
Requires-Dist: flake8 (<4.0.0,>=3.8.3) ; extra == 'test_full'
Requires-Dist: pytest-cov (<3.0.0,>=2.12.0) ; extra == 'test_full'
Requires-Dist: psutil (>=5.9.1) ; extra == 'test_full'
Provides-Extra: tests
Requires-Dist: pytest (<7.0.0,>=6.2.4) ; extra == 'tests'
Requires-Dist: pytest-cov (<3.0.0,>=2.12.0) ; extra == 'tests'
Requires-Dist: pytest-asyncio (<0.15.0,>=0.14.0) ; extra == 'tests'
Requires-Dist: flake8 (<4.0.0,>=3.8.3) ; extra == 'tests'
Requires-Dist: click (<=8.0.4) ; extra == 'tests'
Requires-Dist: black (==20.8b1) ; extra == 'tests'
Requires-Dist: isort (<6.0.0,>=5.0.6) ; extra == 'tests'
Requires-Dist: flask[async] (>=2.1.2) ; extra == 'tests'
Requires-Dist: psutil (>=5.9.1) ; extra == 'tests'
Requires-Dist: requests (>=2.28.1) ; extra == 'tests'
Provides-Extra: ydb
Requires-Dist: ydb (>=2.5.0) ; extra == 'ydb'


# Dialog Flow Framework

The Dialog Flow Framework (DFF) allows you to write conversational services. The service is written by defining a special dialog graph that describes the behavior of the dialog service. The dialog graph contains the dialog script. DFF offers a specialized language (DSL) for quickly writing dialog graphs. You can use it in such services for writing skills for Amazon Alexa and etc, chat-bots for social networks, websites call-centers and etc.

[![Documentation Status](https://readthedocs.org/projects/dialog-flow-engine/badge/?version=latest)](https://readthedocs.org/projects/dialog-flow-engine/badge/?version=latest)
[![Codestyle](https://github.com/deeppavlov/dialog_flow_framework/workflows/codestyle/badge.svg)](https://github.com/deeppavlov/dialog_flow_framework/actions)
[![Tests](https://github.com/deeppavlov/dialog_flow_framework/workflows/test_coverage/badge.svg)](https://github.com/deeppavlov/dialog_flow_framework/actions)
[![License Apache 2.0](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](https://github.com/deeppavlov/dialog_flow_framework/blob/master/LICENSE)
![Python 3.7, 3.8, 3.9](https://img.shields.io/badge/python-3.7%20%7C%203.8%20%7C%203.9-green.svg)
[![PyPI](https://img.shields.io/pypi/v/dff)](https://pypi.org/project/dff/)
[![Downloads](https://pepy.tech/badge/dff)](https://pepy.tech/project/dff)

# Quick Start -- dff
## Installation
```bash
pip install dff
```

## Basic example

```python
from dff.script import GLOBAL, TRANSITIONS, RESPONSE, Context, Actor, Message
import dff.script.conditions.std_conditions as cnd
from typing import Union

# create script of dialog
script = {
GLOBAL: {TRANSITIONS: {("flow", "node_hi"): cnd.exact_match(Message(text="Hi")), ("flow", "node_ok"): cnd.true()}},
"flow": {
"node_hi": {RESPONSE: Message(text="Hi!!!")},
"node_ok": {RESPONSE: Message(text="Okey")},
},
}

# init actor
actor = Actor(script, start_label=("flow", "node_hi"))


# handler requests
def turn_handler(in_request: Message, ctx: Union[Context, dict], actor: Actor):
# Context.cast - gets an object type of [Context, str, dict] returns an object type of Context
ctx = Context.cast(ctx)
# Add in current context a next request of user
ctx.add_request(in_request)
# pass the context into actor and it returns updated context with actor response
ctx = actor(ctx)
# get last actor response from the context
out_response = ctx.last_response
# the next condition branching needs for testing
return out_response, ctx


ctx = {}
while True:
in_request = input("type your answer: ")
out_response, ctx = turn_handler(Message(text=in_request), ctx, actor)
print(out_response.text)

```
When you run this code, you get similar output:
```
type your answer: hi
Okey
type your answer: Hi
Hi!!!
type your answer: ok
Okey
type your answer: ok
Okey

```

To get more advanced examples, take a look at [examples](https://github.com/deeppavlov/dialog_flow_framework/tree/dev/examples) on GitHub.

# Quick Start -- db_connector
## Description

Dialog Flow DB Connector allows you to save and retrieve user dialogue states (in the form of a `Context` object) using various database backends.

Currently, the supported options are:
* [json](https://www.json.org/json-en.html)
* [pickle](https://docs.python.org/3/library/pickle.html)
* [shelve](https://docs.python.org/3/library/shelve.html)
* [Sqlite](https://www.sqlite.org/index.html)
* [Postgresql](https://www.postgresql.org/)
* [MySQL](https://www.mysql.com/)
* [MongoDB](https://www.mongodb.com/)
* [Redis](https://redis.io/)
* [YDB](https://ydb.tech/)

Aside from this, we offer some interfaces for saving data to your local file system. These are not meant to be used in production, but can be helpful for prototyping your application.

## Installation
```bash
pip install dff
```

Please, note that if you are going to use one of the database backends, you will have to specify an extra or install the corresponding requirements yourself.
```bash
pip install dff[redis]
pip install dff[mongodb]
pip install dff[mysql]
pip install dff[postgresql]
pip install dff[sqlite]
pip install dff[ydb]
```

## Basic example

```python
from dff.script import Context, Actor
from dff.context_storages import SQLContextStorage
from .script import some_df_script

db = SQLContextStorage("postgresql://user:password@host:port/dbname")

actor = Actor(some_df_script, start_label=("root", "start"), fallback_label=("root", "fallback"))


def handle_request(request):
user_id = request.args["user_id"]
if user_id not in db:
context = Context(id=user_id)
else:
context = db[user_id]
new_context = actor(context)
db[user_id] = new_context
assert user_id in db
return new_context.last_response

```

To get more advanced examples, take a look at [examples](https://github.com/deeppavlov/dialog_flow_framework/tree/dev/examples) on GitHub.

# Contributing to the Dialog Flow Framework

Please refer to [CONTRIBUTING.md](https://github.com/deeppavlov/dialog_flow_framework/blob/dev/CONTRIBUTING.md).

TODO: split README.md to addons/README.rst & split examples and docs
