"use strict";(self.webpackChunkstreamlit_browser=self.webpackChunkstreamlit_browser||[]).push([[734],{26596:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var o,r=n(29439),i=n(1413),l=n(47313),a=n(56130),d=n(30161),c=n(34264),s=n(2120),u=n(83985),h=n(26419),m=n(72599),f=n(45429),g=n(64243);function p(e){var t=e&&f.fu.getTypeName(e),n=o.Text;return t?"bool"===t?n=o.Boolean:["int64","float64","range"].includes(t)?n=o.Number:t.startsWith("list")&&(n=o.List):n=o.Text,n}function b(e){return(e.displayContent||f.fu.format(e.content,e.contentType,e.field)).replace(/(\r\n|\n|\r)/gm," ")}function v(e,t,n){var o=new RegExp("".concat(e,"[,\\s].*{(?:[^}]*[\\s;]{1})?").concat(t,":\\s*([^;}]+)[;]?.*}"),"gm");n=n.replace(/{/g," {");var r=o.exec(n);if(r)return r[1].trim()}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";if(e===o.Text)return{kind:a.p6.Text,data:"",displayData:"",allowOverlay:!0,readonly:t,style:n};if(e===o.Boolean)return{kind:a.p6.Boolean,data:!1,readonly:t,allowOverlay:!1,style:n};if(e===o.Number)return{kind:a.p6.Number,data:void 0,displayData:"",readonly:t,allowOverlay:!0,contentAlign:"right",style:n};if(e===o.List)return{kind:a.p6.Bubble,data:[],allowOverlay:!0,style:n};throw new Error("Unsupported cell type: ".concat(e))}!function(e){e.Text="text",e.Number="number",e.Boolean="boolean",e.List="list"}(o||(o={}));var w=n(4942),x=(0,n(47167).Z)("div",{target:"e17g77xh0"})((function(){var e;return{position:"relative",display:"inline-block","& .glideDataEditor":{height:"100%",minWidth:"100%"},"& .dvn-scroller":(e={scrollbarWidth:"thin"},(0,w.Z)(e,"overflowX","overlay !important"),(0,w.Z)(e,"overflowY","overlay !important"),e)}}),""),C=(n(47288),n(46417)),Z=35;function T(e){return{accentColor:e.colors.primary,accentFg:e.colors.white,accentLight:(0,s.DZ)(e.colors.primary,.9),borderColor:e.colors.fadedText05,fontFamily:e.genericFonts.bodyFont,bgSearchResult:(0,s.DZ)(e.colors.primary,.9),bgIconHeader:e.colors.fadedText60,fgIconHeader:e.colors.white,bgHeader:e.colors.bgMix,bgHeaderHasFocus:e.colors.secondaryBg,bgHeaderHovered:e.colors.bgMix,textHeader:e.colors.fadedText60,textHeaderSelected:e.colors.white,headerFontStyle:"".concat(e.fontSizes.sm),baseFontStyle:e.fontSizes.sm,editorFontSize:e.fontSizes.sm,textDark:e.colors.bodyText,textMedium:(0,s.DZ)(e.colors.bodyText,.2),textLight:e.colors.fadedText60,textBubble:e.colors.fadedText60,bgCell:e.colors.bgColor,bgCellMedium:e.colors.bgColor,cellHorizontalPadding:8,cellVerticalPadding:3,bgBubble:e.colors.secondaryBg,bgBubbleSelected:e.colors.secondaryBg,linkColor:e.colors.linkText,drilldownBorder:e.colors.darkenedBgMix25}}function S(e,t,n){var d,s,u,h=(0,l.useState)((function(){return new Map})),f=(0,r.Z)(h,2),w=f[0],x=f[1],C=function(e,t){var n,r,l,a,d,c,s=[],u=e.useContainerWidth||e.width;if(t.isEmpty())return s.push((0,i.Z)({id:"empty-index",title:"",hasMenu:!1,getTemplate:function(){return y(o.Text,!0,"faded")},columnType:o.Text},u?{grow:1}:{})),s;for(var h=null!==(n=null===(r=t.types)||void 0===r||null===(l=r.index)||void 0===l?void 0:l.length)&&void 0!==n?n:0,m=null!==(a=null===(d=t.columns)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.length)&&void 0!==a?a:0,f=function(){var e=p(t.types.index[g]);s.push((0,i.Z)({id:"index-".concat(g),title:"",hasMenu:!1,getTemplate:function(){return y(e,!0,"faded")},columnType:e},u?{grow:1}:{}))},g=0;g<h;g++)f();for(var b=function(){var e=t.columns[0][v],n=p(t.types.data[v]);s.push((0,i.Z)({id:"column-".concat(e,"-").concat(v),title:e,hasMenu:!1,getTemplate:function(){return y(n,!0)},columnType:n},u?{grow:3}:{}))},v=0;v<m;v++)b();return s}(e,t).map((function(e){return e.id&&w.has(e.id)&&void 0!==w.get(e.id)?(0,i.Z)((0,i.Z)({},e),{},{width:w.get(e.id),grow:0}):e})),Z=t.isEmpty()?1:t.dimensions.rows-1,T=null!==(d=null===(s=t.types)||void 0===s||null===(u=s.index)||void 0===u?void 0:u.length)&&void 0!==d?d:0,S=l.useCallback((function(e,t,n,o){e.id&&x(new Map(w).set(e.id,o))}),[C]),k=l.useCallback((function(e){var n=(0,r.Z)(e,2),l=n[0],d=n[1];if(t.isEmpty())return(0,i.Z)((0,i.Z)({},y(o.Text,!0,"faded")),{},{displayData:"empty"});if(l>C.length-1)return y(o.Text,!0);var c=C[l].getTemplate();if(d>Z-1)return c;try{return function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=e.kind;if(e.kind===a.p6.Custom&&!(r=null===(n=e.data)||void 0===n?void 0:n.kind))throw new Error("Unable to determine cell type for custom cell.");if(o&&t.cssId){var l={},d=v(t.cssId,"color",o);d&&(l.textDark=d);var c=v(t.cssId,"background-color",o);c&&(l.bgCell=c),l&&(e=(0,i.Z)((0,i.Z)({},e),{},{themeOverride:l}))}if(r===a.p6.Text){var s=b(t);return(0,i.Z)((0,i.Z)({},e),{},{data:"string"!==typeof t.content&&(0,g.bb)(t.content)?s:t.content,displayData:s})}if(r===a.p6.Number){var u=b(t),h=t.content;return h instanceof Int32Array&&(h=h[0]),(0,i.Z)((0,i.Z)({},e),{},{data:(0,g.bb)(h)?Number(h):void 0,displayData:u})}if(r===a.p6.Boolean)return(0,i.Z)((0,i.Z)({},e),{},{data:t.content});if(r===a.p6.Bubble)return(0,i.Z)((0,i.Z)({},e),{},{data:(0,g.bb)(t.content)?JSON.parse(JSON.stringify(t.content,(function(e,t){return"bigint"===typeof t?Number(t):t}))):[]});throw new Error("Unsupported cell kind: ".concat(r))}(c,t.getCell(d+1,l),t.cssStyles)}catch(s){return(0,m.H)(s),c}}),[C,Z,t]),M=(0,c.fF)({columns:C,getCellContent:k,rows:Z,sort:n}).getCellContent,z=function(e,t){return void 0===t?e:e.map((function(e){return e.id===t.column.id?(0,i.Z)((0,i.Z)({},e),{},{title:"asc"===t.direction?"\u2191 ".concat(e.title):"\u2193 ".concat(e.title)}):e}))}(C,n);return{numRows:Z,numIndices:T,columns:z,getCellContent:M,onColumnResize:S}}var k=(0,h.Z)((function(e){var t,n=e.element,i=e.data,c=e.width,s=e.height,h=e.isFullScreen,m=l.useState(),f=(0,r.Z)(m,2),g=f[0],p=f[1],b=l.useRef(null),v=(0,u.u)(),y=n.useContainerWidth||n.width,w=S(n,i,g),k=w.numRows,M=w.numIndices,z=w.columns,B=w.getCellContent,E=w.onColumnResize,H=l.useState(!0),D=(0,r.Z)(H,2),N=D[0],F=D[1],R=l.useState({columns:a.EV.empty(),rows:a.EV.empty()}),W=(0,r.Z)(R,2),L=W[0],I=W[1],O=l.useRef(null),V=l.useCallback((function(e){var t,n="asc",r=z[e];if(g&&g.column.id===r.id){if("asc"!==g.direction)return void p(void 0);n="desc"}p({column:r,direction:n,mode:(t=r.columnType,t===o.Number?"smart":"default")})}),[g,z]),j=Math.max((k+1)*Z+1+2,73),U=Math.min(j,400);n.height&&(U=Math.max(n.height,73),j=Math.max(n.height,j)),s&&(U=Math.min(U,s),j=Math.min(j,s),n.height||(U=j));var A=c;n.useContainerWidth?t=c:n.width&&(t=Math.min(Math.max(n.width,38),c),A=Math.min(Math.max(n.width,A),c));var G=l.useState({width:t||"100%",height:U}),J=(0,r.Z)(G,2),P=J[0],X=J[1];return l.useLayoutEffect((function(){O.current&&n.useContainerWidth&&"100%"===P.width&&X({width:c,height:P.height})}),[c]),l.useLayoutEffect((function(){O.current&&X({width:P.width,height:U})}),[k]),l.useLayoutEffect((function(){O.current&&X(h?{width:y?A:"100%",height:j}:{width:t||"100%",height:U})}),[h]),(0,C.jsx)(x,{className:"stDataFrame",onBlur:function(){N||I({columns:a.EV.empty(),rows:a.EV.empty(),current:void 0})},children:(0,C.jsx)(d.e,{"data-testid":"stDataFrameResizable",ref:O,defaultSize:P,style:{border:"1px solid ".concat(v.colors.fadedText05)},minHeight:73,maxHeight:j,minWidth:38,maxWidth:A,enable:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},grid:[1,Z],snapGap:Z/3,size:P,onResizeStop:function(e,t,n,o){O.current&&X({width:O.current.size.width,height:j-O.current.size.height===3?O.current.size.height+3:O.current.size.height})},children:(0,C.jsx)(a.Nd,{className:"glideDataEditor",ref:b,columns:z,rows:k,minColumnWidth:35,maxColumnWidth:650,rowHeight:Z,headerHeight:Z,getCellContent:B,onColumnResize:E,freezeColumns:M,smoothScrollX:!0,smoothScrollY:k<1e5,verticalBorder:!0,getCellsForSelection:!0,rowMarkers:"none",rangeSelect:"rect",columnSelect:"none",rowSelect:"none",keybindings:{search:!0},onHeaderClicked:V,gridSelection:L,onGridSelectionChange:function(e){I(e)},theme:T(v),onMouseMove:function(e){"out-of-bounds"===e.kind&&N?F(!1):"out-of-bounds"===e.kind||N||F(!0)},experimental:{scrollbarWidthOverride:1}})})})}))}}]);