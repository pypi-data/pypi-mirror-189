"use strict";(self.webpackChunkWebComponents=self.webpackChunkWebComponents||[]).push([[142],{66142:(e,t,s)=>{s.r(t);var r=s(2568);window.wwList={};class n extends r.Z{constructor(e){super(e),this.useRunestoneServices=!0,this.multipleanswers=!1,this.divid=e.orig.id,this.correct=null,this.optional=!1,this.answerList=[],this.correctList=[],this.question=null,this.caption="WebWork",this.containerDiv=e.orig,"fakeww-ww-rs"!==this.divid&&this.checkServer("webwork",!0)}restoreAnswers(e){e.answer||(e.answer=""),this.answers=e.answer}checkLocalStorage(){if(!this.graderactive){localStorage.length;var e=localStorage.getItem(this.localStorageKey());if(null!==e)try{JSON.parse(e).answer.split(":")}catch(e){return console.log(e.message),void localStorage.removeItem(this.localStorageKey())}}}setLocalStorage(e){var t=new Date,s={answer:e.answer,timestamp:t,correct:e.correct};localStorage.setItem(this.localStorageKey(),JSON.stringify(s))}processCurrentAnswers(e){let t=0,s=0,r="check:";this.answerObj={},this.lastAnswerRaw=e;for(let n of Object.keys(e.rh_result.answers))s+=1,1==e.rh_result.answers[n].score&&(t+=1),this.answerObj[n]=`${e.rh_result.answers[n].original_student_ans}`,r+=`actual:${e.rh_result.answers[n].original_student_ans}:expected:${e.rh_result.answers[n].correct_value}:`;let n=t/s;this.percent=n,this.actString=r+`correct:${t}:count:${s}:pct:${n}`,this.correct=1==n}async logCurrentAnswer(e){this.logBookEvent({event:"webwork",div_id:this.divid,act:this.actString,correct:this.correct,answer:JSON.stringify(this.answerObj)})}checkCurrentAnswer(){}}function o(e,t){let s=wwList[t.inputs_ref.problemUUID.replace("-ww-rs","")];s.processCurrentAnswers(t),s.logCurrentAnswer()}function i(e,t){wwList[t.inputs_ref.problemUUID.replace("-ww-rs","")].logBookEvent({event:"webwork",div_id:t.inputs_ref.problemUUID,act:"show"})}void 0===window.component_factory&&(window.component_factory={}),window.component_factory.webwork=function(e){return new n},$((function(){$("body").on("runestone_ww_check",o),$("body").on("runestone_show_correct",i)})),$(document).on("runestone:login-complete",(function(){$("[data-component=webwork]").each((function(e){var t={orig:this,useRunestoneServices:eBookConfig.useRunestoneServices};0==$(this).closest("[data-component=timedAssessment]").length&&(window.wwList[this.id]=new n(t))}))}))}}]);
//# sourceMappingURL=142.373e86ac25b46c25.bundle.js.map